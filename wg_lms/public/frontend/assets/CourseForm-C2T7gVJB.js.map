{"version":3,"file":"CourseForm-C2T7gVJB.js","sources":["../../../../frontend/src/components/Controls/ColorSwatches.vue","../../../../frontend/src/pages/CourseForm.vue"],"sourcesContent":["<template>\n\t<div>\n\t\t<div class=\"text-xs text-ink-gray-5 mb-1\">\n\t\t\t{{ __(label) }}\n\t\t</div>\n\t\t<Popover placement=\"bottom\" class=\"!block\">\n\t\t\t<template #target=\"{ togglePopover, isOpen }\">\n\t\t\t\t<div class=\"space-y-2\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t:placeholder=\"__('Set Color')\"\n\t\t\t\t\t\t@focus=\"togglePopover\"\n\t\t\t\t\t\t:modelValue=\"modelValue\"\n\t\t\t\t\t\t@update:modelValue=\"(val: string) => emit('update:modelValue', val)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"size-4 rounded-full\"\n\t\t\t\t\t\t\t\t:style=\"\n\t\t\t\t\t\t\t\t\tmodelValue\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\t\t\ttheme.backgroundColor[modelValue.toLowerCase()][400],\n\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t: {}\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Palette\n\t\t\t\t\t\t\t\t\tv-if=\"!modelValue\"\n\t\t\t\t\t\t\t\t\tclass=\"size-4 stroke-1.5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #suffix>\n\t\t\t\t\t\t\t<Button variant=\"ghost\">\n\t\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t\tclass=\"size-3 text-ink-gray-5\"\n\t\t\t\t\t\t\t\t\t@click=\"emit('update:modelValue', null)\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #body=\"{ close }\">\n\t\t\t\t<div class=\"rounded-lg bg-surface-white p-3 border w-fit mt-2\">\n\t\t\t\t\t<div class=\"text-xs text-ink-gray-5 mb-1.5\">\n\t\t\t\t\t\t{{ __('Swatches') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"grid grid-cols-7 gap-2\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"color in colors\"\n\t\t\t\t\t\t\t:key=\"color\"\n\t\t\t\t\t\t\tclass=\"size-5 rounded-full cursor-pointer\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\ttheme.backgroundColor[color.toLowerCase()][400],\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\t\t\temit('update:modelValue', color)\n\t\t\t\t\t\t\t\t\tclose()\n\t\t\t\t\t\t\t\t\temit('change', color)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Popover>\n\t\t<div class=\"text-sm text-ink-gray-5 mt-2\">\n\t\t\t{{ description }}\n\t\t</div>\n\t</div>\n</template>\n<script setup lang=\"ts\">\nimport { Button, FormControl, Popover } from 'frappe-ui'\nimport { computed } from 'vue'\nimport { Palette, X } from 'lucide-vue-next'\nimport { theme } from '@/utils/theme'\n\nconst emit = defineEmits(['update:modelValue', 'change'])\n\nconst props = defineProps<{\n\tmodelValue: string\n\tlabel: string\n\tdescription?: string\n}>()\n\nconst colors = computed(() => {\n\treturn [\n\t\t'Red',\n\t\t'Blue',\n\t\t'Green',\n\t\t'Amber',\n\t\t'Purple',\n\t\t'Cyan',\n\t\t'Orange',\n\t\t'Violet',\n\t\t'Pink',\n\t\t'Teal',\n\t\t'Gray',\n\t\t'Yellow',\n\t]\n})\n</script>\n","<template>\n\t<div class=\"h-full\">\n\t\t<div class=\"grid grid-cols-1 md:grid-cols-[70%,30%] h-full\">\n\t\t\t<div>\n\t\t\t\t<header\n\t\t\t\t\tclass=\"sticky top-0 z-10 flex flex-col md:flex-row md:items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t\t\t>\n\t\t\t\t\t<Breadcrumbs class=\"h-7\" :items=\"breadcrumbs\" />\n\t\t\t\t\t<div class=\"flex items-center mt-3 md:mt-0\">\n\t\t\t\t\t\t<Button v-if=\"courseResource.data?.name\" @click=\"trashCourse()\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<Trash2 class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"solid\" @click=\"submitCourse()\" class=\"ml-2\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"mt-5 mb-5\">\n\t\t\t\t\t<div class=\"px-5 md:px-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mb-4 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Details') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"course.title\"\n\t\t\t\t\t\t\t\t:label=\"__('Title')\"\n\t\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tdoctype=\"LMS Category\"\n\t\t\t\t\t\t\t\tv-model=\"course.category\"\n\t\t\t\t\t\t\t\t:label=\"__('Category')\"\n\t\t\t\t\t\t\t\t:onCreate=\"(value, close) => openSettings('Categories', close)\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\tv-model=\"instructors\"\n\t\t\t\t\t\t\t\tdoctype=\"User\"\n\t\t\t\t\t\t\t\t:label=\"__('Instructors')\"\n\t\t\t\t\t\t\t\t:filters=\"{ ignore_user_type: 1 }\"\n\t\t\t\t\t\t\t\t:onCreate=\"(close) => openSettings('Members', close)\"\n\t\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class=\"text-xs text-ink-gray-5\">\n\t\t\t\t\t\t\t\t\t{{ __('Tags') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-model=\"newTag\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"__('Add a keyword and then press enter')\"\n\t\t\t\t\t\t\t\t\t:class=\"['w-full', 'flex-1', 'my-1']\"\n\t\t\t\t\t\t\t\t\t@keyup.enter=\"updateTags()\"\n\t\t\t\t\t\t\t\t\tid=\"tags\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-2\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"course.tags\"\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"tag in course.tags?.split(', ')\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center bg-surface-gray-2 text-ink-gray-7 p-2 rounded-md\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ tag }}\n\t\t\t\t\t\t\t\t\t\t\t<X\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"stroke-1.5 w-3 h-3 ml-2 cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"removeTag(tag)\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<div class=\"mb-4\">\n\t\t\t\t\t\t\t\t<div class=\"text-xs text-ink-gray-5 mb-2\">\n\t\t\t\t\t\t\t\t\t{{ __('Course Image') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<FileUploader\n\t\t\t\t\t\t\t\t\tv-if=\"!course.course_image\"\n\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/*']\"\n\t\t\t\t\t\t\t\t\t:validateFile=\"validateFile\"\n\t\t\t\t\t\t\t\t\t@success=\"(file) => saveImage(file)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template\n\t\t\t\t\t\t\t\t\t\tv-slot=\"{ file, progress, uploading, openFileSelector }\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"border rounded-md w-fit py-5 px-20 cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"openFileSelector\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Image class=\"size-5 stroke-1 text-ink-gray-7\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"ml-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button @click=\"openFileSelector\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ __('Upload') }}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-ink-gray-5 text-sm leading-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t__('Appears on the course card in the course list')\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</FileUploader>\n\t\t\t\t\t\t\t\t<div v-else class=\"mb-4\">\n\t\t\t\t\t\t\t\t\t<div class=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t:src=\"course.course_image.file_url\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"border rounded-md w-40\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ml-4\">\n\t\t\t\t\t\t\t\t\t\t\t<Button @click=\"removeImage()\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ __('Remove') }}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"mt-2 text-ink-gray-5 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t__('Appears on the course card in the course list')\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<ColorSwatches\n\t\t\t\t\t\t\t\tv-model=\"course.card_gradient\"\n\t\t\t\t\t\t\t\t:label=\"__('Color')\"\n\t\t\t\t\t\t\t\t:description=\"__('Choose a color for the course card')\"\n\t\t\t\t\t\t\t\tclass=\"w-full\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"px-5 md:px-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Settings') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"user.data?.is_moderator\"\n\t\t\t\t\t\t\t\tclass=\"flex flex-col space-y-5\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.published\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Published')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-model=\"course.published_on\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Published On')\"\n\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"flex flex-col space-y-5\">\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.upcoming\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Upcoming')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.featured\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Featured')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.disable_self_learning\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Disable Self Enrollment')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"px-5 md:px-10 pb-5 mb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('About the Course') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"course.short_introduction\"\n\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t:rows=\"5\"\n\t\t\t\t\t\t\t:label=\"__('Short Introduction')\"\n\t\t\t\t\t\t\t:placeholder=\"\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'A one line introduction to the course that appears on the course card'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t<div class=\"mb-1.5 text-sm text-ink-gray-5\">\n\t\t\t\t\t\t\t\t{{ __('Course Description') }}\n\t\t\t\t\t\t\t\t<span class=\"text-ink-red-3\">*</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<TextEditor\n\t\t\t\t\t\t\t\t:content=\"course.description\"\n\t\t\t\t\t\t\t\t@change=\"(val) => (course.description = val)\"\n\t\t\t\t\t\t\t\t:editable=\"true\"\n\t\t\t\t\t\t\t\t:fixedMenu=\"true\"\n\t\t\t\t\t\t\t\teditorClass=\"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"course.video_link\"\n\t\t\t\t\t\t\t:label=\"__('Preview Video')\"\n\t\t\t\t\t\t\t:placeholder=\"\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Paste the youtube link of a short video introducing the course'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\tv-model=\"related_courses\"\n\t\t\t\t\t\t\tdoctype=\"LMS Course\"\n\t\t\t\t\t\t\t:label=\"__('Related Courses')\"\n\t\t\t\t\t\t\t:filters=\"{ name: ['!=', courseResource.data?.name] }\"\n\t\t\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t\t\t(close) => {\n\t\t\t\t\t\t\t\t\trouter.push({\n\t\t\t\t\t\t\t\t\t\tname: 'CourseForm',\n\t\t\t\t\t\t\t\t\t\tparams: { courseName: 'new' },\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"px-5 md:px-10 pb-5 space-y-5 border-b\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mt-5 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Pricing and Certification') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-3 gap-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"course.paid_course\"\n\t\t\t\t\t\t\t\t:label=\"__('Paid Course')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"course.enable_certification\"\n\t\t\t\t\t\t\t\t:label=\"__('Completion Certificate')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"course.paid_certificate\"\n\t\t\t\t\t\t\t\t:label=\"__('Paid Certificate')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\n\t\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-if=\"course.paid_course || course.paid_certificate\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.course_price\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Amount')\"\n\t\t\t\t\t\t\t\t\t:required=\"course.paid_course || course.paid_certificate\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tv-if=\"course.paid_certificate\"\n\t\t\t\t\t\t\t\t\tdoctype=\"Course Evaluator\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.evaluator\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Evaluator')\"\n\t\t\t\t\t\t\t\t\t:required=\"course.paid_certificate\"\n\t\t\t\t\t\t\t\t\t:onCreate=\"\n\t\t\t\t\t\t\t\t\t\t(value, close) => openSettings('Evaluators', close)\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tv-if=\"course.paid_course || course.paid_certificate\"\n\t\t\t\t\t\t\t\t\tdoctype=\"Currency\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.currency\"\n\t\t\t\t\t\t\t\t\t:filters=\"{ enabled: 1 }\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Currency')\"\n\t\t\t\t\t\t\t\t\t:required=\"course.paid_course || course.paid_certificate\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tv-if=\"course.paid_certificate\"\n\t\t\t\t\t\t\t\t\tv-model=\"course.timezone\"\n\t\t\t\t\t\t\t\t\t:label=\"__('Timezone')\"\n\t\t\t\t\t\t\t\t\t:required=\"course.paid_certificate\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"__('e.g. IST, UTC, GMT...')\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"px-5 md:px-10 pb-5 space-y-5\">\n\t\t\t\t\t\t<div class=\"text-lg font-semibold mt-5 text-ink-gray-9\">\n\t\t\t\t\t\t\t{{ __('Meta Tags') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"meta.description\"\n\t\t\t\t\t\t\t\t:label=\"__('Meta Description')\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t:rows=\"7\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tv-model=\"meta.keywords\"\n\t\t\t\t\t\t\t\t:label=\"__('Meta Keywords')\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\t:rows=\"7\"\n\t\t\t\t\t\t\t\t:placeholder=\"__('Comma separated keywords for SEO')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"border-l\">\n\t\t\t\t<CourseOutline\n\t\t\t\t\tv-if=\"courseResource.data\"\n\t\t\t\t\t:courseName=\"courseResource.data.name\"\n\t\t\t\t\t:title=\"__('Course Outline')\"\n\t\t\t\t\t:allowEdit=\"true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tBreadcrumbs,\n\tTextEditor,\n\tButton,\n\tcreateResource,\n\tFormControl,\n\tFileUploader,\n\tusePageMeta,\n\ttoast,\n} from 'frappe-ui'\nimport {\n\tinject,\n\tonMounted,\n\tonBeforeUnmount,\n\tcomputed,\n\tref,\n\treactive,\n\twatch,\n\tgetCurrentInstance,\n} from 'vue'\nimport { Image, Trash2, X } from 'lucide-vue-next'\nimport { useRouter } from 'vue-router'\nimport { capture, startRecording, stopRecording } from '@/telemetry'\nimport { useOnboarding } from 'frappe-ui/frappe'\nimport { sessionStore } from '../stores/session'\nimport {\n\topenSettings,\n\tgetMetaInfo,\n\tupdateMetaInfo,\n\tvalidateFile,\n} from '@/utils'\nimport Link from '@/components/Controls/Link.vue'\nimport CourseOutline from '@/components/CourseOutline.vue'\nimport MultiSelect from '@/components/Controls/MultiSelect.vue'\nimport ColorSwatches from '@/components/Controls/ColorSwatches.vue'\n\nconst user = inject('$user')\nconst newTag = ref('')\nconst { brand } = sessionStore()\nconst router = useRouter()\nconst instructors = ref([])\nconst related_courses = ref([])\nconst app = getCurrentInstance()\nconst { updateOnboardingStep } = useOnboarding('learning')\nconst { $dialog } = app.appContext.config.globalProperties\n\nconst props = defineProps({\n\tcourseName: {\n\t\ttype: String,\n\t},\n})\n\nconst course = reactive({\n\ttitle: '',\n\tshort_introduction: '',\n\tdescription: '',\n\tvideo_link: '',\n\tcourse_image: null,\n\tcard_gradient: '',\n\ttags: '',\n\tcategory: '',\n\tpublished: false,\n\tpublished_on: '',\n\tfeatured: false,\n\tupcoming: false,\n\tdisable_self_learning: false,\n\tenable_certification: false,\n\tpaid_course: false,\n\tpaid_certificate: false,\n\tcourse_price: '',\n\tcurrency: '',\n\tevaluator: '',\n\ttimezone: '',\n})\n\nconst meta = reactive({\n\tdescription: '',\n\tkeywords: '',\n})\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n\n\tif (props.courseName !== 'new') {\n\t\tfetchCourseInfo()\n\t} else {\n\t\tcapture('course_form_opened')\n\t\tstartRecording()\n\t}\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\nconst fetchCourseInfo = () => {\n\tcourseResource.reload()\n\tgetMetaInfo('courses', props.courseName, meta)\n}\n\nconst keyboardShortcut = (e) => {\n\tif (\n\t\te.key === 's' &&\n\t\t(e.ctrlKey || e.metaKey) &&\n\t\t!e.target.classList.contains('ProseMirror')\n\t) {\n\t\tsubmitCourse()\n\t\te.preventDefault()\n\t}\n}\n\nonBeforeUnmount(() => {\n\twindow.removeEventListener('keydown', keyboardShortcut)\n\tstopRecording()\n})\n\nconst courseCreationResource = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Course',\n\t\t\t\timage: course.course_image?.file_url || '',\n\t\t\t\tinstructors: instructors.value.map((instructor) => ({\n\t\t\t\t\tinstructor: instructor,\n\t\t\t\t})),\n\t\t\t\trelated_courses: related_courses.value.map((course) => ({\n\t\t\t\t\tcourse: course,\n\t\t\t\t})),\n\t\t\t\t...values,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst courseEditResource = createResource({\n\turl: 'frappe.client.set_value',\n\tauto: false,\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Course',\n\t\t\tname: values.course,\n\t\t\tfieldname: {\n\t\t\t\timage: course.course_image?.file_url || '',\n\t\t\t\tinstructors: instructors.value.map((instructor) => ({\n\t\t\t\t\tinstructor: instructor,\n\t\t\t\t})),\n\t\t\t\trelated_courses: related_courses.value.map((course) => ({\n\t\t\t\t\tcourse: course,\n\t\t\t\t})),\n\t\t\t\t...course,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst courseResource = createResource({\n\turl: 'frappe.client.get',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Course',\n\t\t\tname: props.courseName,\n\t\t}\n\t},\n\tauto: false,\n\tonSuccess(data) {\n\t\tObject.keys(data).forEach((key) => {\n\t\t\tif (key == 'instructors') {\n\t\t\t\tinstructors.value = []\n\t\t\t\tdata.instructors.forEach((instructor) => {\n\t\t\t\t\tinstructors.value.push(instructor.instructor)\n\t\t\t\t})\n\t\t\t} else if (key == 'related_courses') {\n\t\t\t\trelated_courses.value = []\n\t\t\t\tdata.related_courses.forEach((course) => {\n\t\t\t\t\trelated_courses.value.push(course.course)\n\t\t\t\t})\n\t\t\t} else if (Object.hasOwn(course, key)) course[key] = data[key]\n\t\t})\n\t\tlet checkboxes = [\n\t\t\t'published',\n\t\t\t'upcoming',\n\t\t\t'disable_self_learning',\n\t\t\t'paid_course',\n\t\t\t'featured',\n\t\t\t'enable_certification',\n\t\t\t'paid_certificate',\n\t\t]\n\t\tfor (let idx in checkboxes) {\n\t\t\tlet key = checkboxes[idx]\n\t\t\tcourse[key] = course[key] ? true : false\n\t\t}\n\n\t\tif (data.image) imageResource.reload({ image: data.image })\n\t\tcheck_permission()\n\t},\n})\n\nconst imageResource = createResource({\n\turl: 'lms.lms.api.get_file_info',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tfile_url: values.image,\n\t\t}\n\t},\n\tauto: false,\n\tonSuccess(data) {\n\t\tcourse.course_image = data\n\t},\n})\n\nconst submitCourse = () => {\n\tif (courseResource.data) {\n\t\teditCourse()\n\t} else {\n\t\tcreateCourse()\n\t}\n}\n\nconst createCourse = () => {\n\tcourseCreationResource.submit(course, {\n\t\tonSuccess(data) {\n\t\t\tupdateMetaInfo('courses', data.name, meta)\n\t\t\tif (user.data?.is_system_manager) {\n\t\t\t\tupdateOnboardingStep('create_first_course', true, false, () => {\n\t\t\t\t\tlocalStorage.setItem('firstCourse', data.name)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tcapture('course_created')\n\t\t\ttoast.success(__('Course created successfully'))\n\t\t\trouter.push({\n\t\t\t\tname: 'CourseForm',\n\t\t\t\tparams: { courseName: data.name },\n\t\t\t})\n\t\t},\n\t\tonError(err) {\n\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t},\n\t})\n}\n\nconst editCourse = () => {\n\tcourseEditResource.submit(\n\t\t{\n\t\t\tcourse: courseResource.data.name,\n\t\t},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tupdateMetaInfo('courses', props.courseName, meta)\n\t\t\t\ttoast.success(__('Course updated successfully'))\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst deleteCourse = createResource({\n\turl: 'lms.lms.api.delete_course',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tcourse: props.courseName,\n\t\t}\n\t},\n\tonSuccess() {\n\t\ttoast.success(__('Course deleted successfully'))\n\t\trouter.push({ name: 'Courses' })\n\t},\n})\n\nconst trashCourse = () => {\n\t$dialog({\n\t\ttitle: __('Delete Course'),\n\t\tmessage: __(\n\t\t\t'Deleting the course will also delete all its chapters and lessons. Are you sure you want to delete this course?'\n\t\t),\n\t\tactions: [\n\t\t\t{\n\t\t\t\tlabel: __('Delete'),\n\t\t\t\ttheme: 'red',\n\t\t\t\tvariant: 'solid',\n\t\t\t\tonClick(close) {\n\t\t\t\t\tdeleteCourse.submit()\n\t\t\t\t\tclose()\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t})\n}\n\nwatch(\n\t() => props.courseName !== 'new',\n\t(newVal) => {\n\t\tif (newVal) {\n\t\t\tfetchCourseInfo()\n\t\t}\n\t}\n)\n\nconst updateTags = () => {\n\tif (newTag.value) {\n\t\tcourse.tags = course.tags ? `${course.tags}, ${newTag.value}` : newTag.value\n\t\tnewTag.value = ''\n\t}\n}\n\nconst removeTag = (tag) => {\n\tcourse.tags = course.tags\n\t\t?.split(', ')\n\t\t.filter((t) => t !== tag)\n\t\t.join(', ')\n\tnewTag.value = ''\n}\n\nconst saveImage = (file) => {\n\tcourse.course_image = file\n}\n\nconst removeImage = () => {\n\tcourse.course_image = null\n}\n\nconst check_permission = () => {\n\tlet user_is_instructor = false\n\tif (user.data?.is_moderator) return\n\n\tinstructors.value.forEach((instructor) => {\n\t\tif (!user_is_instructor && instructor == user.data?.name) {\n\t\t\tuser_is_instructor = true\n\t\t}\n\t})\n\n\tif (!user_is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n}\n\nconst breadcrumbs = computed(() => {\n\tlet crumbs = [\n\t\t{\n\t\t\tlabel: 'Courses',\n\t\t\troute: { name: 'Courses' },\n\t\t},\n\t]\n\tif (courseResource.data) {\n\t\tcrumbs.push({\n\t\t\tlabel: course.title,\n\t\t\troute: { name: 'CourseDetail', params: { courseName: props.courseName } },\n\t\t})\n\t}\n\tcrumbs.push({\n\t\tlabel: props.courseName == 'new' ? 'New Course' : 'Edit Course',\n\t\troute: { name: 'CourseForm', params: { courseName: props.courseName } },\n\t})\n\treturn crumbs\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: courseResource.data?.title || __('New Course'),\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["emit","__emit","colors","computed","_createElementBlock","_createElementVNode","_hoisted_1","_toDisplayString","__","__props","_createVNode","_unref","Popover","_withCtx","togglePopover","isOpen","_hoisted_2","FormControl","_cache","val","_normalizeStyle","theme","_createBlock","Palette","Button","X","close","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","color","e","_hoisted_7","user","inject","newTag","ref","brand","sessionStore","router","useRouter","instructors","related_courses","app","getCurrentInstance","updateOnboardingStep","useOnboarding","$dialog","props","course","reactive","meta","onMounted","_a","_b","fetchCourseInfo","capture","keyboardShortcut","courseResource","getMetaInfo","submitCourse","onBeforeUnmount","courseCreationResource","createResource","values","instructor","courseEditResource","data","key","checkboxes","idx","imageResource","check_permission","editCourse","createCourse","updateMetaInfo","toast","err","deleteCourse","trashCourse","watch","newVal","updateTags","removeTag","tag","t","saveImage","file","removeImage","user_is_instructor","breadcrumbs","crumbs","usePageMeta","_openBlock","Breadcrumbs","Trash2","_hoisted_6","_hoisted_8","$event","Link","value","openSettings","_hoisted_9","MultiSelect","_hoisted_10","_hoisted_11","_hoisted_12","_createTextVNode","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_24","FileUploader","validateFile","progress","uploading","openFileSelector","_hoisted_16","Image","_hoisted_18","_hoisted_19","ColorSwatches","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","TextEditor","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","CourseOutline"],"mappings":"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"}