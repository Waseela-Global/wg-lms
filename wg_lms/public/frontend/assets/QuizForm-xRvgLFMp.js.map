{"version":3,"file":"QuizForm-xRvgLFMp.js","sources":["../../../../frontend/src/components/Modals/Question.vue","../../../../frontend/src/pages/QuizForm.vue"],"sourcesContent":["<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\tsize: '5xl',\n\t\t}\"\n\t>\n\t\t<template #body>\n\t\t\t<div class=\"p-5 space-y-5\">\n\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9 mb-5\">\n\t\t\t\t\t{{ __(props.title) }}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"!editMode\"\n\t\t\t\t\tclass=\"flex items-center text-xs text-ink-gray-7 space-x-5\"\n\t\t\t\t>\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t:label=\"__('Choose an existing question')\"\n\t\t\t\t\t\tv-model=\"chooseFromExisting\"\n\t\t\t\t\t\tclass=\"!p-0\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"!chooseFromExisting || editMode\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label class=\"block text-xs text-ink-gray-5 mb-1\">\n\t\t\t\t\t\t\t{{ __('Question') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<TextEditor\n\t\t\t\t\t\t\t:content=\"question.question\"\n\t\t\t\t\t\t\t@change=\"(val) => (question.question = val)\"\n\t\t\t\t\t\t\t:editable=\"true\"\n\t\t\t\t\t\t\t:fixedMenu=\"true\"\n\t\t\t\t\t\t\teditorClass=\"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem]\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"grid grid-cols-2 gap-8 mt-4\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tv-model=\"question.marks\"\n\t\t\t\t\t\t\t:label=\"__('Marks')\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t:label=\"__('Type')\"\n\t\t\t\t\t\t\tv-model=\"question.type\"\n\t\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t\t:options=\"['Choices', 'User Input', 'Open Ended']\"\n\t\t\t\t\t\t\tclass=\"pb-2\"\n\t\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"question.type == 'Choices'\"\n\t\t\t\t\t\tclass=\"text-base font-semibold text-ink-gray-9 mb-5 mt-10\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ __('Options') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else-if=\"question.type == 'User Input'\"\n\t\t\t\t\t\tclass=\"text-base font-semibold text-ink-gray-9 mb-5 mt-5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ __('Possibilities') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"question.type == 'Choices'\"\n\t\t\t\t\t\tclass=\"grid grid-cols-2 gap-x-8 gap-y-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div v-for=\"n in 4\" class=\"space-y-4 py-2\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t:label=\"__('Option') + ' ' + n\"\n\t\t\t\t\t\t\t\tv-model=\"question[`option_${n}`]\"\n\t\t\t\t\t\t\t\t:required=\"n <= 2 ? true : false\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t:label=\"__('Explanation')\"\n\t\t\t\t\t\t\t\tv-model=\"question[`explanation_${n}`]\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t:label=\"__('Correct Answer')\"\n\t\t\t\t\t\t\t\tv-model=\"question[`is_correct_${n}`]\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-else-if=\"question.type == 'User Input'\"\n\t\t\t\t\t\tclass=\"grid grid-cols-2 gap-x-8 gap-y-4 py-2\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div v-for=\"n in 4\">\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t:label=\"__('Possibility') + ' ' + n\"\n\t\t\t\t\t\t\t\tv-model=\"question[`possibility_${n}`]\"\n\t\t\t\t\t\t\t\t:required=\"n == 1 ? true : false\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else-if=\"chooseFromExisting\" class=\"space-y-2\">\n\t\t\t\t\t<Link\n\t\t\t\t\t\tv-model=\"existingQuestion.question\"\n\t\t\t\t\t\t:label=\"__('Select a question')\"\n\t\t\t\t\t\tdoctype=\"LMS Question\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"existingQuestion.marks\"\n\t\t\t\t\t\t:label=\"__('Marks')\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex items-center justify-end space-x-2 mt-5\">\n\t\t\t\t\t<Button variant=\"solid\" @click=\"submitQuestion()\">\n\t\t\t\t\t\t{{ __('Save') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport {\n\tDialog,\n\tFormControl,\n\tTextEditor,\n\tcreateResource,\n\tSwitch,\n\tButton,\n\ttoast,\n} from 'frappe-ui'\nimport { watch, reactive, ref, inject } from 'vue'\nimport Link from '@/components/Controls/Link.vue'\nimport { useOnboarding } from 'frappe-ui/frappe'\n\nconst show = defineModel()\nconst quiz = defineModel('quiz')\nconst chooseFromExisting = ref(false)\nconst editMode = ref(false)\nconst user = inject('$user')\nconst { updateOnboardingStep } = useOnboarding('learning')\n\nconst existingQuestion = reactive({\n\tquestion: '',\n\tmarks: 1,\n})\n\nconst question = reactive({\n\tquestion: '',\n\ttype: 'Choices',\n\tmarks: 1,\n})\n\nconst populateFields = () => {\n\tlet fields = ['option', 'is_correct', 'explanation', 'possibility']\n\tlet counter = 1\n\tfields.forEach((field) => {\n\t\twhile (counter <= 4) {\n\t\t\tquestion[`${field}_${counter}`] = field === 'is_correct' ? false : null\n\t\t\tcounter++\n\t\t}\n\t})\n}\n\npopulateFields()\n\nconst props = defineProps({\n\ttitle: {\n\t\ttype: String,\n\t\tdefault: __('Add a new question'),\n\t},\n\tquestionDetail: {\n\t\ttype: [Object, null],\n\t\trequired: true,\n\t},\n})\n\nconst questionData = createResource({\n\turl: 'frappe.client.get',\n\tmakeParams() {\n\t\treturn {\n\t\t\tdoctype: 'LMS Question',\n\t\t\tname: props.questionDetail.question,\n\t\t}\n\t},\n\tauto: false,\n\tonSuccess(data) {\n\t\tlet counter = 1\n\t\teditMode.value = true\n\t\tObject.keys(data).forEach((key) => {\n\t\t\tif (Object.hasOwn(question, key)) question[key] = data[key]\n\t\t})\n\t\twhile (counter <= 4) {\n\t\t\tquestion[`is_correct_${counter}`] = data[`is_correct_${counter}`]\n\t\t\t\t? true\n\t\t\t\t: false\n\t\t\tcounter++\n\t\t}\n\t\tquestion.marks = props.questionDetail.marks\n\t},\n})\n\nwatch(show, () => {\n\tif (show.value) {\n\t\teditMode.value = false\n\t\tif (props.questionDetail.question) questionData.fetch()\n\t\telse {\n\t\t\tquestion.question = ''\n\t\t\tquestion.marks = 1\n\t\t\tquestion.type = 'Choices'\n\t\t\texistingQuestion.question = ''\n\t\t\texistingQuestion.marks = 1\n\t\t\tchooseFromExisting.value = false\n\t\t\tpopulateFields()\n\t\t}\n\n\t\tif (props.questionDetail.marks) question.marks = props.questionDetail.marks\n\t}\n})\n\nconst questionRow = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Quiz Question',\n\t\t\t\tparent: quiz.value.doc.name,\n\t\t\t\tparentfield: 'questions',\n\t\t\t\tparenttype: 'LMS Quiz',\n\t\t\t\t...values,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst questionCreation = createResource({\n\turl: 'frappe.client.insert',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoc: {\n\t\t\t\tdoctype: 'LMS Question',\n\t\t\t\t...question,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst submitQuestion = () => {\n\tif (props.questionDetail?.question) updateQuestion()\n\telse addQuestion()\n}\n\nconst addQuestion = () => {\n\tif (chooseFromExisting.value) {\n\t\taddQuestionRow({\n\t\t\tquestion: existingQuestion.question,\n\t\t\tmarks: existingQuestion.marks,\n\t\t})\n\t} else {\n\t\tquestionCreation.submit(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tonSuccess(data) {\n\t\t\t\t\taddQuestionRow({\n\t\t\t\t\t\tquestion: data.name,\n\t\t\t\t\t\tmarks: question.marks,\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tonError(err) {\n\t\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t\t},\n\t\t\t}\n\t\t)\n\t}\n}\n\nconst addQuestionRow = (question) => {\n\tquestionRow.submit(\n\t\t{\n\t\t\t...question,\n\t\t},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tif (user.data?.is_system_manager)\n\t\t\t\t\tupdateOnboardingStep('create_first_quiz')\n\n\t\t\t\tshow.value = false\n\t\t\t\ttoast.success(__('Question added successfully'))\n\t\t\t\tquiz.value.reload()\n\t\t\t\tshow.value = false\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t\tshow.value = false\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst questionUpdate = createResource({\n\turl: 'frappe.client.set_value',\n\tauto: false,\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Question',\n\t\t\tname: questionData.data?.name,\n\t\t\tfieldname: {\n\t\t\t\t...question,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst marksUpdate = createResource({\n\turl: 'frappe.client.set_value',\n\tauto: false,\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Quiz Question',\n\t\t\tname: props.questionDetail.name,\n\t\t\tfieldname: {\n\t\t\t\tmarks: question.marks,\n\t\t\t},\n\t\t}\n\t},\n})\n\nconst updateQuestion = () => {\n\tquestionUpdate.submit(\n\t\t{},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\tmarksUpdate.submit(\n\t\t\t\t\t{},\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess() {\n\t\t\t\t\t\t\tshow.value = false\n\t\t\t\t\t\t\ttoast.success(__('Question updated successfully'))\n\t\t\t\t\t\t\tquiz.value.reload()\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n</script>\n<style>\ninput[type='radio']:checked {\n\tbackground-color: theme('colors.gray.900') !important;\n\tborder-color: theme('colors.gray.900') !important;\n\t--tw-ring-color: theme('colors.gray.900') !important;\n}\n</style>\n","<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t\t<div v-if=\"!readOnlyMode\" class=\"space-x-2\">\n\t\t\t<Badge v-if=\"quizDetails.isDirty\" theme=\"orange\">\n\t\t\t\t{{ __('Not Saved') }}\n\t\t\t</Badge>\n\t\t\t<router-link\n\t\t\t\tv-if=\"quizDetails.doc?.name\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'QuizPage',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tquizID: quizDetails.doc.name,\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<ListChecks class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('Test Quiz') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t\t<router-link\n\t\t\t\tv-if=\"quizDetails.doc?.name\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'QuizSubmissionList',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tquizID: quizDetails.doc.name,\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button>\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<ClipboardList class=\"size-4 stroke-1.5\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('Check Submissions') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t\t<Button variant=\"solid\" @click=\"submitQuiz()\">\n\t\t\t\t{{ __('Save') }}\n\t\t\t</Button>\n\t\t</div>\n\t</header>\n\t<div v-if=\"quizDetails.doc\" class=\"py-5\">\n\t\t<div class=\"px-20 pb-5 space-y-5 border-b mb-5\">\n\t\t\t<div class=\"text-lg text-ink-gray-9 font-semibold mb-4\">\n\t\t\t\t{{ __('Details') }}\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-2 gap-5\">\n\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.title\"\n\t\t\t\t\t\t:label=\"__('Title')\"\n\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tv-model=\"quizDetails.doc.max_attempts\"\n\t\t\t\t\t\t:label=\"__('Maximum Attempts')\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tv-model=\"quizDetails.doc.duration\"\n\t\t\t\t\t\t:label=\"__('Duration (in minutes)')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"space-y-5\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.total_marks\"\n\t\t\t\t\t\t:label=\"__('Total Marks')\"\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.passing_percentage\"\n\t\t\t\t\t\t:label=\"__('Passing Percentage')\"\n\t\t\t\t\t\t:required=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"px-20 pb-5 space-y-5 border-b mb-5\">\n\t\t\t<div class=\"text-lg text-ink-gray-9 font-semibold mb-4\">\n\t\t\t\t{{ __('Settings') }}\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-3 gap-5\">\n\t\t\t\t<div class=\"flex flex-col space-y-10\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.show_answers\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:label=\"__('Show Answers')\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.show_submission_history\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:label=\"__('Show Submission History')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex flex-col space-y-5\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.shuffle_questions\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:label=\"__('Shuffle Questions')\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-if=\"quizDetails.doc.shuffle_questions\"\n\t\t\t\t\t\tv-model=\"quizDetails.doc.limit_questions_to\"\n\t\t\t\t\t\t:label=\"__('Limit Questions To')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"flex flex-col space-y-5\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"quizDetails.doc.enable_negative_marking\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:label=\"__('Enable Negative Marking')\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-if=\"quizDetails.doc.enable_negative_marking\"\n\t\t\t\t\t\tv-model=\"quizDetails.doc.marks_to_cut\"\n\t\t\t\t\t\t:label=\"__('Marks to Deduct')\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"px-20 pb-5 space-y-5 mb-5\">\n\t\t\t<div class=\"flex items-center justify-between mb-4\">\n\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t{{ __('Questions') }}\n\t\t\t\t</div>\n\t\t\t\t<Button v-if=\"!readOnlyMode\" @click=\"openQuestionModal()\">\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<Plus class=\"w-4 h-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('New Question') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<ListView\n\t\t\t\tv-if=\"questions.length\"\n\t\t\t\t:columns=\"questionColumns\"\n\t\t\t\t:rows=\"questions\"\n\t\t\t\trow-key=\"name\"\n\t\t\t\t:options=\"{\n\t\t\t\t\tshowTooltip: false,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<ListHeader\n\t\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2\"\n\t\t\t\t>\n\t\t\t\t\t<ListHeaderItem :item=\"item\" v-for=\"item in questionColumns\" />\n\t\t\t\t</ListHeader>\n\t\t\t\t<ListRows>\n\t\t\t\t\t<ListRow\n\t\t\t\t\t\t:row=\"row\"\n\t\t\t\t\t\tv-slot=\"{ idx, column, item }\"\n\t\t\t\t\t\tv-for=\"row in questions\"\n\t\t\t\t\t\t@click=\"openQuestionModal(row)\"\n\t\t\t\t\t\tclass=\"cursor-pointer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListRowItem :item=\"item\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"column.key == 'question_detail'\"\n\t\t\t\t\t\t\t\tclass=\"text-xs truncate h-4\"\n\t\t\t\t\t\t\t\tv-html=\"item\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div v-else class=\"text-xs\">\n\t\t\t\t\t\t\t\t{{ item }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t</ListRow>\n\t\t\t\t</ListRows>\n\t\t\t\t<ListSelectBanner>\n\t\t\t\t\t<template #actions=\"{ unselectAll, selections }\">\n\t\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t@click=\"deleteQuestions(selections, unselectAll)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Trash2 class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</ListSelectBanner>\n\t\t\t</ListView>\n\t\t\t<div v-else class=\"text-ink-gray-6 text-sm\">\n\t\t\t\t{{ __('No questions added yet') }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<Question\n\t\tv-model=\"showQuestionModal\"\n\t\t:questionDetail=\"currentQuestion\"\n\t\tv-model:quiz=\"quizDetails\"\n\t\t:title=\"\n\t\t\tcurrentQuestion.question\n\t\t\t\t? __('Edit the question')\n\t\t\t\t: __('Add a new question')\n\t\t\"\n\t/>\n</template>\n<script setup>\nimport {\n\tBreadcrumbs,\n\tcreateResource,\n\tFormControl,\n\tListView,\n\tListHeader,\n\tListHeaderItem,\n\tListRows,\n\tListRow,\n\tListRowItem,\n\tListSelectBanner,\n\tButton,\n\tusePageMeta,\n\ttoast,\n\tcreateDocumentResource,\n\tBadge,\n} from 'frappe-ui'\nimport {\n\tcomputed,\n\treactive,\n\tref,\n\tonMounted,\n\tinject,\n\tonBeforeUnmount,\n\twatch,\n} from 'vue'\nimport { sessionStore } from '../stores/session'\nimport { ClipboardList, ListChecks, Plus, Trash2 } from 'lucide-vue-next'\nimport { useRouter } from 'vue-router'\nimport Question from '@/components/Modals/Question.vue'\n\nconst { brand } = sessionStore()\nconst showQuestionModal = ref(false)\nconst currentQuestion = reactive({\n\tquestion: '',\n\tmarks: 0,\n\tname: '',\n})\nconst user = inject('$user')\nconst router = useRouter()\nconst readOnlyMode = window.read_only_mode\n\nconst props = defineProps({\n\tquizID: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\nconst questions = ref([])\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n\tif (props.quizID !== 'new') {\n\t\tquizDetails.reload()\n\t}\n\twindow.addEventListener('keydown', keyboardShortcut)\n})\n\nconst keyboardShortcut = (e) => {\n\tif (e.key === 's' && (e.ctrlKey || e.metaKey)) {\n\t\tsubmitQuiz()\n\t\te.preventDefault()\n\t}\n}\n\nonBeforeUnmount(() => {\n\twindow.removeEventListener('keydown', keyboardShortcut)\n})\n\nwatch(\n\t() => props.quizID !== 'new',\n\t(newVal) => {\n\t\tif (newVal) {\n\t\t\tquizDetails.reload()\n\t\t}\n\t}\n)\n\nconst quizDetails = createDocumentResource({\n\tdoctype: 'LMS Quiz',\n\tname: props.quizID,\n\tauto: false,\n\tonSuccess(doc) {\n\t\tif (doc.questions && doc.questions.length > 0) {\n\t\t\tquestions.value = doc.questions.map((question) => question)\n\t\t}\n\t},\n})\n\nconst submitQuiz = () => {\n\tquizDetails.setValue.submit(\n\t\t{\n\t\t\t...quizDetails.doc,\n\t\t\ttotal_marks: calculateTotalMarks(),\n\t\t},\n\t\t{\n\t\t\tonSuccess(data) {\n\t\t\t\tquizDetails.doc.total_marks = data.total_marks\n\t\t\t\ttoast.success(__('Quiz updated successfully'))\n\t\t\t},\n\t\t\tonError(err) {\n\t\t\t\ttoast.error(err.messages?.[0] || err)\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst calculateTotalMarks = () => {\n\tlet totalMarks = 0\n\tif (\n\t\tquizDetails.doc?.limit_questions_to &&\n\t\tquizDetails.doc?.questions.length > 0\n\t)\n\t\treturn (\n\t\t\tquizDetails.doc.questions[0].marks * quizDetails.doc.limit_questions_to\n\t\t)\n\n\tquizDetails.doc?.questions.forEach((question) => {\n\t\ttotalMarks += question.marks\n\t})\n\treturn totalMarks\n}\n\nconst questionColumns = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('ID'),\n\t\t\tkey: 'question',\n\t\t\twidth: '10rem',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Question'),\n\t\t\tkey: __('question_detail'),\n\t\t\twidth: '40rem',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Marks'),\n\t\t\tkey: 'marks',\n\t\t\twidth: '5rem',\n\t\t},\n\t]\n})\n\nconst openQuestionModal = (question = null) => {\n\tif (question) {\n\t\tcurrentQuestion.question = question.question\n\t\tcurrentQuestion.marks = question.marks\n\t\tcurrentQuestion.name = question.name\n\t} else {\n\t\tcurrentQuestion.question = ''\n\t\tcurrentQuestion.marks = 0\n\t\tcurrentQuestion.name = ''\n\t}\n\tshowQuestionModal.value = true\n}\n\nconst deleteQuestionResource = createResource({\n\turl: 'lms.lms.api.delete_documents',\n\tmakeParams(values) {\n\t\treturn {\n\t\t\tdoctype: 'LMS Quiz Question',\n\t\t\tdocuments: values.questions,\n\t\t}\n\t},\n})\n\nconst deleteQuestions = (selections, unselectAll) => {\n\tdeleteQuestionResource.submit(\n\t\t{\n\t\t\tquestions: Array.from(selections),\n\t\t},\n\t\t{\n\t\t\tonSuccess() {\n\t\t\t\ttoast.success(__('Questions deleted successfully'))\n\t\t\t\tquizDetails.reload()\n\t\t\t\tunselectAll()\n\t\t\t},\n\t\t}\n\t)\n}\n\nconst breadcrumbs = computed(() => {\n\tlet crumbs = [\n\t\t{\n\t\t\tlabel: __('Quizzes'),\n\t\t\troute: {\n\t\t\t\tname: 'Quizzes',\n\t\t\t},\n\t\t},\n\t]\n\n\tcrumbs.push({\n\t\tlabel: props.quizID == 'new' ? __('New Quiz') : quizDetails.doc?.title,\n\t\troute: { name: 'QuizForm', params: { quizID: props.quizID } },\n\t})\n\treturn crumbs\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: props.quizID == 'new' ? __('New Quiz') : quizDetails.doc?.title,\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["show","_useModel","__props","quiz","chooseFromExisting","ref","editMode","user","inject","updateOnboardingStep","useOnboarding","existingQuestion","reactive","question","populateFields","fields","counter","field","props","questionData","createResource","data","key","watch","questionRow","values","questionCreation","submitQuestion","_a","updateQuestion","addQuestion","addQuestionRow","err","toast","questionUpdate","marksUpdate","_createBlock","_unref","Dialog","$event","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","__","_openBlock","_createElementBlock","_hoisted_3","_createVNode","Switch","_hoisted_4","_hoisted_5","TextEditor","val","_hoisted_6","FormControl","_cache","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","_hoisted_10","_hoisted_11","_hoisted_12","Link","_hoisted_13","Button","brand","sessionStore","showQuestionModal","currentQuestion","router","useRouter","readOnlyMode","questions","onMounted","_b","quizDetails","keyboardShortcut","e","submitQuiz","onBeforeUnmount","newVal","createDocumentResource","doc","calculateTotalMarks","totalMarks","_c","questionColumns","computed","openQuestionModal","deleteQuestionResource","deleteQuestions","selections","unselectAll","breadcrumbs","crumbs","usePageMeta","Breadcrumbs","Badge","_component_router_link","ListChecks","_createTextVNode","ClipboardList","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","Plus","ListView","ListHeader","item","ListHeaderItem","ListRows","row","ListRow","_withCtx","idx","column","ListRowItem","_hoisted_19","ListSelectBanner","_hoisted_20","Trash2","_hoisted_21","Question"],"mappings":"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"}