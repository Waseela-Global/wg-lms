import{i as B,p as R,x as L,c as m,aa as H,z as I,B as u,E as A,a as v,o as b,e as s,f as n,u as t,w as _,l as p,t as i,q as V,L as r,h as k,b as W,aI as X,cE as G,by as K,ci as Q,bz as Y,bA as Z,ai as ee,cO as oe,a8 as w}from"./index-CZIp1LU6.js";import{_ as ae}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-B2fdcvTt.js";const le={class:""},se={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},te={class:"py-5"},ne={class:"container border-b mb-4 pb-5"},ie={class:"text-lg font-semibold mb-4"},re={class:"grid grid-cols-2 gap-5"},de={class:"space-y-4"},me={class:"space-y-4"},ue={class:"container border-b mb-4 pb-5"},be={class:"text-lg font-semibold mb-4"},pe={class:"grid grid-cols-2 gap-5"},ce={class:"block text-ink-gray-5 text-xs mb-1 mt-4"},_e={class:"mb-4"},ye={key:1,class:""},fe={class:"flex items-center"},ge={class:"border rounded-md p-2 mr-2"},ve={class:"flex flex-col"},Ve={class:"text-sm text-ink-gray-4 mt-1"},ke={class:"container mt-4"},we={class:"block text-ink-gray-5 text-xs mb-1"},Je={__name:"JobForm",props:{jobName:{type:String,default:"new"}},setup(y){const j=B("$user"),f=R(),{brand:C}=L(),d=y,J=m({url:"frappe.client.insert",makeParams(e){var o;return{doc:{doctype:"Job Opportunity",company_logo:(o=a.image)==null?void 0:o.file_url,...a}}}}),x=m({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:d.jobName,fieldname:{company_logo:a.image.file_url,...a}}}}),c=m({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:d.jobName}},onSuccess(e){Object.keys(e).forEach(o=>{Object.hasOwn(a,o)&&(a[o]=e[o])}),e.company_logo&&N.reload({image:e.company_logo})}}),N=m({url:"wg_lms.lms.api.get_file_info",makeParams(e){return{file_url:e.image}},auto:!1,onSuccess(e){a.image=e}}),a=H({job_title:"",location:"",country:"",type:"Full Time",work_mode:"On-site",status:"Open",company_name:"",company_website:"",image:null,description:"",company_email_address:""});I(()=>{j.data||(window.location.href="/login"),d.jobName!="new"&&c.reload()});const F=()=>{T(),c.data?S():O()},O=()=>{J.submit({},{onSuccess(e){f.push({name:"JobDetail",params:{job:e.name}})},onError(e){var o;w.error(((o=e.messages)==null?void 0:o[0])||e)}})},S=()=>{x.submit({},{onSuccess(e){f.push({name:"JobDetail",params:{job:e.name}})},onError(e){var o;w.error(((o=e.messages)==null?void 0:o[0])||e)}})},T=()=>{Object.keys(a).forEach(e=>{e!="description"&&typeof a[e]=="string"&&(a[e]=oe(a[e]))})},U=e=>{a.image=e},q=()=>{a.image=null},E=u(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),$=u(()=>[{label:"On site",value:"On-site"},{label:"Hybrid",value:"Hybrid"},{label:"Remote",value:"Remote"}]),D=u(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),P=u(()=>[{label:"Jobs",route:{name:"Jobs"}},{label:d.jobName=="new"?"New Job":"Edit Job",route:{name:"JobForm"}}]);return A(()=>{var e;return{title:d.jobName=="new"?"New Job":(e=c.data)==null?void 0:e.title,icon:C.favicon}}),(e,o)=>{const M=X;return b(),v("div",le,[s("header",se,[n(t(ae),{items:P.value},null,8,["items"]),n(t(V),{variant:"solid",onClick:o[0]||(o[0]=l=>F())},{default:_(()=>[p(i(e.__("Save")),1)]),_:1})]),s("div",te,[s("div",ne,[s("div",ie,i(e.__("Job Details")),1),s("div",re,[s("div",de,[n(t(r),{modelValue:a.job_title,"onUpdate:modelValue":o[1]||(o[1]=l=>a.job_title=l),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:a.type,"onUpdate:modelValue":o[2]||(o[2]=l=>a.type=l),label:e.__("Type"),type:"select",options:E.value,required:!0},null,8,["modelValue","label","options"]),n(t(r),{modelValue:a.work_mode,"onUpdate:modelValue":o[3]||(o[3]=l=>a.work_mode=l),label:e.__("Work Mode"),type:"select",options:$.value,required:!0},null,8,["modelValue","label","options"])]),s("div",me,[n(t(r),{modelValue:a.location,"onUpdate:modelValue":o[4]||(o[4]=l=>a.location=l),label:e.__("City"),required:!0},null,8,["modelValue","label"]),n(M,{modelValue:a.country,"onUpdate:modelValue":o[5]||(o[5]=l=>a.country=l),doctype:"Country",label:e.__("Country"),required:!0},null,8,["modelValue","label"]),y.jobName!="new"?(b(),k(t(r),{key:0,modelValue:a.status,"onUpdate:modelValue":o[6]||(o[6]=l=>a.status=l),label:e.__("Status"),type:"select",options:D.value,required:!0},null,8,["modelValue","label","options"])):W("",!0)])])]),s("div",ue,[s("div",be,i(e.__("Company Details")),1),s("div",pe,[s("div",null,[n(t(r),{modelValue:a.company_name,"onUpdate:modelValue":o[7]||(o[7]=l=>a.company_name=l),label:e.__("Company Name"),class:"mb-4",required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:a.company_website,"onUpdate:modelValue":o[8]||(o[8]=l=>a.company_website=l),label:e.__("Company Website"),required:!0},null,8,["modelValue","label"])]),s("div",null,[n(t(r),{modelValue:a.company_email_address,"onUpdate:modelValue":o[9]||(o[9]=l=>a.company_email_address=l),label:e.__("Company Email Address"),class:"mb-4",required:!0},null,8,["modelValue","label"]),s("label",ce,[p(i(e.__("Company Logo"))+" ",1),o[13]||(o[13]=s("span",{class:"text-ink-red-3"},"*",-1))]),a.image?(b(),v("div",ye,[s("div",fe,[s("div",ge,[n(t(Q),{class:"h-5 w-5 stroke-1.5 text-ink-gray-7"})]),s("div",ve,[s("span",null,i(a.image.file_name),1),s("span",Ve,i(t(Y)(a.image.file_size)),1)]),n(t(Z),{onClick:o[11]||(o[11]=l=>q()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(b(),k(t(K),{key:0,fileTypes:["image/*"],validateFile:t(G),onSuccess:o[10]||(o[10]=l=>U(l))},{default:_(({file:l,progress:h,uploading:g,openFileSelector:z})=>[s("div",_e,[n(t(V),{onClick:z,loading:g},{default:_(()=>[p(i(g?`Uploading ${h}%`:"Upload an image"),1)]),_:2},1032,["onClick","loading"])])]),_:1},8,["validateFile"]))])])]),s("div",ke,[s("label",we,[p(i(e.__("Description"))+" ",1),o[14]||(o[14]=s("span",{class:"text-ink-red-3"},"*",-1))]),n(t(ee),{content:a.description,onChange:o[12]||(o[12]=l=>a.description=l),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])])])}}};export{Je as default};
//# sourceMappingURL=JobForm-Dd_0R27O.js.map
