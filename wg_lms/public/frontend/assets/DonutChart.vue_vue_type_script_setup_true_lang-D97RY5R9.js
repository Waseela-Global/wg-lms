import{g as C,_ as b}from"./ECharts.vue_vue_type_script_setup_true_lang-CahjvLlX.js";import{f}from"./NumberChart.vue_vue_type_script_setup_true_lang-Dp5gNzOs.js";import{d as g,y as x,B as I,h as _,o as w}from"./index-CZIp1LU6.js";function L(e){let n=e.data||[];n=n.sort((t,a)=>{const o=t[e.valueColumn],i=a[e.valueColumn];return o===i?0:o>i?-1:1});const l=n.map(t=>t[e.categoryColumn]),s=n.map(t=>t[e.valueColumn]),r=s.reduce((t,a)=>isNaN(a)?t:t+a,0);let u=["40%","70%"],c=["50%","48%"];e.subtitle&&(u=["40%","70%"],c=["50%","50%"]),e.showInlineLabels&&(c=["50%","50%"]);let m="horizontal",p=0,d="center",h=[0,10,10,10];return{animation:!0,animationDuration:700,color:e.colors,textStyle:{fontFamily:["InterVar","sans-serif"]},title:C(e.title,e.subtitle),dataset:{source:[[e.categoryColumn,e.valueColumn],...n.map(t=>[t[e.categoryColumn],t[e.valueColumn]])]},series:[{type:"pie",name:e.categoryColumn,center:c,radius:u,labelLine:{show:e.showInlineLabels,lineStyle:{width:2},length:10,length2:20,smooth:!0},label:{show:e.showInlineLabels,formatter:({value:t,name:a})=>{const o=r>0?t[1]/r*100:0;return`${a} (${o.toFixed(0)}%)`}},emphasis:{scaleSize:5}}],legend:e.showInlineLabels?null:{left:d,bottom:p,padding:h,orient:m,show:!0,type:"scroll",itemGap:12,formatter:function(t){const a=l.indexOf(t),o=r>0?s[a]/r*100:0;return`${t} (${o.toFixed(0)}%)`},textStyle:{padding:[0,0,0,-5],color:"var(--ink-gray-8)"},icon:"circle",pageIcons:{horizontal:["M 17 3 h 2 c 0.386 0 0.738 0.223 0.904 0.572 s 0.115 0.762 -0.13 1.062 L 11.292 15 l 8.482 10.367 c 0.245 0.299 0.295 0.712 0.13 1.062 S 19.386 27 19 27 h -2 c -0.3 0 -0.584 -0.135 -0.774 -0.367 l -9 -11 c -0.301 -0.369 -0.301 -0.898 0 -1.267 l 9 -11 C 16.416 3.135 16.7 3 17 3 Z","M 12 27 h -2 c -0.386 0 -0.738 -0.223 -0.904 -0.572 s -0.115 -0.762 0.13 -1.062 L 17.708 15 L 9.226 4.633 c -0.245 -0.299 -0.295 -0.712 -0.13 -1.062 S 9.614 3 10 3 h 2 c 0.3 0 0.584 0.135 0.774 0.367 l 9 11 c 0.301 0.369 0.301 0.898 0 1.267 l -9 11 C 12.584 26.865 12.3 27 12 27 Z"]},pageIconColor:"var(--ink-gray-6)",pageInactiveColor:"var(--ink-gray-4)",pageIconSize:10,pageTextStyle:{color:"var(--ink-gray-6)"},animationDurationUpdate:300},tooltip:{trigger:"item",confine:!0,appendToBody:!1,formatter:function(t){const a=t,o=a.value[1],i=r>0?o/r*100:0,v=isNaN(o)?o:f(o,1,!0),y=i.toFixed(0);return`
          <div class="flex items-center justify-between gap-5">
            <div>${a.name}</div>
            <div class="font-bold">
              ${v} (${y}%)
            </div>
          </div>
        `}}}}const z=g({__name:"DonutChart",props:{config:{}},setup(e){const n=e,l=x(""),s=I(()=>{try{return L(n.config)}catch(r){return l.value=r.message,{}}});return(r,u)=>(w(),_(b,{options:s.value,error:l.value},null,8,["options","error"]))}});export{z as _};
//# sourceMappingURL=DonutChart.vue_vue_type_script_setup_true_lang-D97RY5R9.js.map
