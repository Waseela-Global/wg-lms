import{aF as Fe,a as g,o as u,e as i,b as L,bL as X,f as w,T as he,t as B,u as e,bP as dt,y as F,aa as ke,B as O,i as de,h as W,w as N,q as oe,L as ue,ak as ce,bQ as qe,bR as ct,D as tt,bS as Le,bT as nt,z as Be,aq as vt,J as me,bU as Ve,bV as ft,bW as mt,bX as pt,bY as gt,bZ as ht,b_ as yt,aG as Ze,b$ as xt,c0 as Je,aJ as Re,n as ne,c1 as Dt,F as K,c2 as Q,c3 as He,g as le,c4 as Se,c5 as lt,c6 as at,c7 as be,_ as we,c8 as ot,c9 as st,l as Ye,ca as bt,b2 as wt,cb as kt,cc as Ne,cd as Ct,ce as Mt,ar as Tt,bE as Ge,cf as _t,ab as Xe,bF as Qe,bG as Ke,bs as Oe,a7 as Et,s as $t,v as Vt,c as Ee,a8 as $e,cg as St,G as Ft,ch as It,a4 as At,a5 as jt,C as Ht,j as Yt,k as et,ci as Lt,V as Rt,cj as Bt,aI as Wt,H as Pt}from"./index-CZIp1LU6.js";import{T as zt}from"./TabButtons-B8hLfXVF.js";import{_ as Ut}from"./Tabs-CxjdE4n0.js";import"./use-resolve-button-type-Bt-hu_zP.js";const Nt={},Ot={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function qt(d,s){return u(),g("svg",Ot,[...s[0]||(s[0]=[i("path",{d:"M8 6C9.10457 6 10 6.89543 10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8C6 6.89543 6.89543 6 8 6ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"currentColor"},null,-1)])])}const Zt=Fe(Nt,[["render",qt]]),Jt={},Gt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Xt(d,s){return u(),g("svg",Gt,[...s[0]||(s[0]=[i("path",{d:"M3 6C4.10457 6 5 6.89543 5 8C5 9.10457 4.10457 10 3 10C1.89543 10 1 9.10457 1 8C1 6.89543 1.89543 6 3 6ZM8 6C9.10457 6 10 6.89543 10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8C6 6.89543 6.89543 6 8 6ZM13 6C14.1046 6 15 6.89543 15 8C15 9.10457 14.1046 10 13 10C11.8954 10 11 9.10457 11 8C11 6.89543 11.8954 6 13 6ZM13 7C12.4477 7 12 7.44772 12 8C12 8.55228 12.4477 9 13 9C13.5523 9 14 8.55228 14 8C14 7.44772 13.5523 7 13 7ZM3 7C2.44772 7 2 7.44772 2 8C2 8.55228 2.44772 9 3 9C3.55228 9 4 8.55228 4 8C4 7.44772 3.55228 7 3 7ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"currentColor"},null,-1)])])}const Qt=Fe(Jt,[["render",Xt]]),Kt={},en={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function tn(d,s){return u(),g("svg",en,[...s[0]||(s[0]=[i("path",{d:"M5 9C6.10457 9 7 9.89543 7 11C7 12.1046 6.10457 13 5 13C3.89543 13 3 12.1046 3 11C3 9.89543 3.89543 9 5 9ZM11 9C12.1046 9 13 9.89543 13 11C13 12.1046 12.1046 13 11 13C9.89543 13 9 12.1046 9 11C9 9.89543 9.89543 9 11 9ZM5 10C4.44772 10 4 10.4477 4 11C4 11.5523 4.44772 12 5 12C5.55228 12 6 11.5523 6 11C6 10.4477 5.55228 10 5 10ZM11 10C10.4477 10 10 10.4477 10 11C10 11.5523 10.4477 12 11 12C11.5523 12 12 11.5523 12 11C12 10.4477 11.5523 10 11 10ZM5 3C6.10457 3 7 3.89543 7 5C7 6.10457 6.10457 7 5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3ZM11 3C12.1046 3 13 3.89543 13 5C13 6.10457 12.1046 7 11 7C9.89543 7 9 6.10457 9 5C9 3.89543 9.89543 3 11 3ZM5 4C4.44772 4 4 4.44772 4 5C4 5.55228 4.44772 6 5 6C5.55228 6 6 5.55228 6 5C6 4.44772 5.55228 4 5 4ZM11 4C10.4477 4 10 4.44772 10 5C10 5.55228 10.4477 6 11 6C11.5523 6 12 5.55228 12 5C12 4.44772 11.5523 4 11 4Z",fill:"currentColor"},null,-1)])])}const nn=Fe(Kt,[["render",tn]]),ln={class:"flex flex-row-reverse gap-2"},an={class:"flex flex-col gap-5"},on={class:"flex justify-between text-xl font-semibold"},sn={class:"flex flex-col gap-4"},rn={class:"flex items-center gap-2"},un={class:"text-sm font-normal"},dn={key:0,class:"flex items-center gap-2"},cn={class:"text-sm font-normal"},vn={key:1,class:"flex items-center gap-2"},fn={class:"text-sm font-normal"},mn={key:2,class:"flex items-center gap-2"},pn={class:"text-sm font-normal"},gn={__name:"EventModalContent",props:{calendarEvent:{type:Object,required:!0},date:{type:Date,required:!0},isEditMode:{type:Boolean}},emits:["close","edit","delete"],setup(d,{emit:s}){return(f,n)=>(u(),g("div",{class:"w-80 rounded bg-surface-modal text-ink-gray-8 p-4 shadow",onClick:n[3]||(n[3]=X(()=>{},["stop"]))},[i("div",ln,[i("span",{class:"cursor-pointer",onClick:n[0]||(n[0]=X(y=>f.$emit("close"),["stop"]))},[w(he,{name:"x",class:"h-4 w-4"})]),d.isEditMode?(u(),g("span",{key:0,class:"cursor-pointer",onClick:n[1]||(n[1]=X(y=>f.$emit("edit"),["stop"]))},[w(he,{name:"edit-2",class:"h-4 w-4"})])):L("",!0),d.isEditMode?(u(),g("span",{key:1,class:"cursor-pointer",onClick:n[2]||(n[2]=X(y=>f.$emit("delete"),["stop"]))},[w(he,{name:"trash-2",class:"h-4 w-4"})])):L("",!0)]),i("div",an,[i("div",on,[i("span",null,B(d.calendarEvent.title||"New Event"),1)]),i("div",sn,[i("div",rn,[w(he,{name:"calendar",class:"h-4 w-4"}),i("span",un,B(e(dt)(d.date)),1)]),d.calendarEvent.participant?(u(),g("div",dn,[w(he,{name:"user",class:"h-4 w-4"}),i("span",cn,B(d.calendarEvent.participant),1)])):L("",!0),d.calendarEvent.fromTime&&d.calendarEvent.toTime?(u(),g("div",vn,[w(he,{name:"clock",class:"h-4 w-4"}),i("span",fn,B(d.calendarEvent.fromTime)+" - "+B(d.calendarEvent.toTime),1)])):L("",!0),d.calendarEvent.venue?(u(),g("div",mn,[w(he,{name:"map-pin",class:"h-4 w-4"}),i("span",pn,B(d.calendarEvent.venue),1)])):L("",!0)])])]))}},hn={class:"grid grid-cols-1 gap-4"},yn={class:"flex flex-row-reverse gap-2"},rt={__name:"NewEventModal",props:{event:{type:Object}},setup(d){var E,C,p,j,h,D,M,c,o,P,R,ee;const s=F(!1),f=d,n=ke({title:((E=f.event)==null?void 0:E.title)||"",date:((C=f.event)==null?void 0:C.date)||"",participant:((p=f.event)==null?void 0:p.participant)||"",fromDateTime:((j=f.event)==null?void 0:j.fromDateTime)||"",toDateTime:((h=f.event)==null?void 0:h.toDateTime)||"",fromDate:((D=f.event)==null?void 0:D.fromDate)||"",toDate:((M=f.event)==null?void 0:M.toDate)||"",fromTime:((c=f.event)==null?void 0:c.fromTime)||"",toTime:((o=f.event)==null?void 0:o.toTime)||"",venue:((P=f.event)==null?void 0:P.venue)||"",color:((R=f.event)==null?void 0:R.color)||"green",id:"",isFullDay:((ee=f.event)==null?void 0:ee.isFullDay)||!1}),y=O(()=>n.title!==f.event.title||n.date!==f.event.date||n.participant!==f.event.participant||n.fromDate!==f.event.fromDate||n.toDate!==f.event.toDate||n.fromTime!==f.event.fromTime||n.toTime!==f.event.toTime||n.venue!==f.event.venue||n.color!==f.event.color||n.isFullDay!==f.event.isFullDay),x=Object.keys(qe),a=F("");function t(){n.date?!n.fromTime&&!n.isFullDay?a.value="Start Time is required":!n.toTime&&!n.isFullDay?a.value="End Time is required":a.value="":a.value="Date is required",n.hasOwnProperty("fromTime")&&n.hasOwnProperty("toTime")&&V()}function V(){nt(n.fromTime,n.toTime)<=0&&(a.value="Start time must be less than End Time")}const v=de("calendarActions");function _(re){if(t(),!a.value){if(!y.value){re();return}if(A(),f.event.hasOwnProperty("id"))n.id=f.event.id,v.updateEventState(n);else{const $="#"+Math.random().toString(36).substring(3,9);n.id=$,v.createNewEvent(n)}re()}}function A(){n.isFullDay?(n.fromTime="",n.toTime=""):(n.fromTime=Le(n.fromTime),n.toTime=Le(n.toTime))}return(re,$)=>(u(),W(e(tt),{modelValue:s.value,"onUpdate:modelValue":$[11]||($[11]=T=>s.value=T),options:{title:f.event.hasOwnProperty("id")?"Edit Event":"New Event",actions:[{label:"Submit",variant:"solid"}]},class:"z-50"},{"body-content":N(()=>[i("div",null,[i("div",hn,[w(e(ue),{type:"Input",modelValue:n.title,"onUpdate:modelValue":$[0]||($[0]=T=>n.title=T),label:"Title",placeholder:"Meet with John Doe"},null,8,["modelValue"]),w(e(ue),{type:"Date",modelValue:n.date,"onUpdate:modelValue":$[1]||($[1]=T=>n.date=T),label:"Date",required:"true",onBlur:$[2]||($[2]=T=>t())},null,8,["modelValue"]),w(e(ue),{type:"Input",modelValue:n.participant,"onUpdate:modelValue":$[3]||($[3]=T=>n.participant=T),label:"Person",placeholder:"John Doe"},null,8,["modelValue"]),n.isFullDay?L("",!0):(u(),W(e(ue),{key:0,type:"time",modelValue:n.fromTime,"onUpdate:modelValue":$[4]||($[4]=T=>n.fromTime=T),label:"Start Time",onBlur:$[5]||($[5]=T=>t())},null,8,["modelValue"])),n.isFullDay?L("",!0):(u(),W(e(ue),{key:1,type:"time",modelValue:n.toTime,"onUpdate:modelValue":$[6]||($[6]=T=>n.toTime=T),label:"End Time",onBlur:$[7]||($[7]=T=>t())},null,8,["modelValue"])),w(e(ue),{type:"Input",modelValue:n.venue,"onUpdate:modelValue":$[8]||($[8]=T=>n.venue=T),label:"Venue",placeholder:"Frappe, Neelkanth Business Park"},null,8,["modelValue"]),w(e(ue),{type:"select",modelValue:n.color,"onUpdate:modelValue":$[9]||($[9]=T=>n.color=T),options:e(x),label:"Color",class:"form-control prefix"},{prefix:N(()=>{var T;return[i("div",{class:"h-5 w-5 rounded-full shadow-md",style:ce({backgroundColor:(T=e(qe)[n==null?void 0:n.color])==null?void 0:T.color})},null,4)]}),_:1},8,["modelValue","options"]),w(e(ue),{type:"checkbox",label:"Full Day Event?",modelValue:n.isFullDay,"onUpdate:modelValue":$[10]||($[10]=T=>n.isFullDay=T)},null,8,["modelValue"]),a.value?(u(),W(e(ct),{key:2,message:a.value},null,8,["message"])):L("",!0)])])]),actions:N(({close:T})=>[i("div",yn,[w(e(oe),{class:"w-full",variant:"solid",onClick:S=>_(T),label:"Submit"},null,8,["onClick"])])]),_:1},8,["modelValue","options"]))}},xn={class:"relative flex h-full select-none items-start gap-2 overflow-hidden"},Dn={key:0},bn={class:"flex w-fit flex-col gap-0.5 overflow-hidden"},wn={class:"relative flex h-full select-none items-start gap-2 overflow-hidden"},kn={key:0},Cn={class:"flex w-fit flex-col text-start overflow-hidden whitespace-nowrap"},Mn={class:"text-sm font-medium truncate"},Tn=40,_n=32.5,En={__name:"CalendarEvent",props:{event:{type:Object,required:!0},date:{type:Date,required:!0}},setup(d){const s=d,f=de("activeView"),n=de("config"),y=de("calendarActions");Be(()=>{document.addEventListener("click",x)}),vt(()=>{document.removeEventListener("click",x)});function x(r){P.value&&P.value.contains(r.target)||o.value&&o.value.contains(r.target)||ge()}const a=F(s.event),t=ke({...s.event});me(()=>s.event,r=>{t.fromTime=r.fromTime,t.toTime=r.toTime,t.fromDate=r.fromDate,t.toDate=r.toDate,t.fromDateTime=r.fromDate+" "+r.fromTime,t.toDateTime=r.toDate+" "+r.toTime,a.value=r},{deep:!0});const V=n.eventIcons,v=n.hourHeight/60,_=v*15,A=ke({xAxis:0,yAxis:0}),E=O(()=>{if(s.event.isFullDay)return{transform:`translate(${A.xAxis}px, ${A.yAxis}px)`,zIndex:T.value?100:s.event.idx+1};let k=nt(a.value.fromTime,a.value.toTime)*v;k<Tn&&(k=_n),k+="px";let H=Ve(a.value.fromTime)*v,I=a.value.hallNumber,U=$.value||T.value?"100%":`${93-I*20}%`,q=$.value||T.value?"0":`${I*20}%`,G=$.value||T.value?100:(s.event.idx||1)*I+1;return{height:k,top:H+"px",zIndex:G,left:q,width:U,transform:`translate(${A.xAxis}px, ${A.yAxis}px)`}}),C=O(()=>{let r=s.event.color||"green";return r=h(r),{"--bg":r.bg,"--text":r.text,"--subtext":r.subtext,"--text-active":r.textActive,"--subtext-active":r.subtextActive,"--bg-hover":r.bgHover,"--bg-active":r.bgActive}}),p=O(()=>{let r=s.event.color||"green";return r=h(r),{"--border":r.border,"--border-active":r.borderActive}}),j=()=>{const r=document.documentElement.getAttribute("data-theme");return r||(document.documentElement.classList.contains("htw-dark")?"dark":"light")};function h(r){let k=j()==="dark"?ft:qe;if(!(r!=null&&r.startsWith("#")))return k[r]||k.green;for(const H of Object.values(k))if(H.color===r)return H;return k.green}const D=F(null),M=F(null),c=O(()=>{if(f.value==="Month")return;if(s.event.isFullDay)return"line-clamp-1";if(!o.value||!D.value||!M.value||!s.event.fromTime&&!s.event.toTime)return;const r=o.value.clientHeight,k=M.value.offsetHeight,H=r-k-8,I=getComputedStyle(D.value),U=parseFloat(I.lineHeight),q=Math.max(1,Math.floor(H/U));return`line-clamp-${Math.min(q,6)}`}),o=F(null),P=F(null),{floatingStyles:R}=mt(o,P,{placement:f.value==="Day"?"top":"right",middleware:[gt(10),ht(),yt()],whileElementsMounted:pt}),ee=F(!1),re=F(null),$=F(!1),T=F(!1),S=F(!1);function ye(r){let k=parseFloat(r)/v+Ve(a.value.fromTime);return k=Math.floor(k),k>1440&&(k=1440),He(k)}const te=F(!1);function ae(r){$.value=!0,T.value=!1;let k=a.value.toTime;window.addEventListener("mousemove",H),window.addEventListener("mouseup",I,{once:!0});function H(U){te.value=!0;let q=U.clientY-o.value.getBoundingClientRect().top;o.value.style.height=Math.round(q/_)*_+"px",o.value.style.width="100%",t.toTime=ye(o.value.style.height),a.value.toTime=ye(o.value.style.height)}function I(){$.value=!1,k!==a.value.toTime&&y.updateEventState(a.value),window.removeEventListener("mousemove",H)}}function pe(r){r.preventDefault();let k=r.clientY;const H=o.value.getBoundingClientRect();if($.value)return;window.addEventListener("mousemove",I),window.addEventListener("mouseup",U);function I(q){T.value=!0,te.value=!0,o.value&&(ge(),o.value.style.cursor="grabbing",f.value==="Week"&&z(q.clientX,H),s.event.isFullDay||Pe(q.clientY,k,H),a.value.fromTime!==t.fromTime||a.value.toTime!==t.toTime?S.value=!0:S.value=!1)}function U(q){q.preventDefault(),T.value=!1,o.value&&(o.value.style.cursor="pointer",a.value.isFullDay&&f.value==="Week"&&(o.value.style.width="90%"),a.value.date!==t.date&&(S.value=!0),S.value&&(a.value.date=t.date,a.value.fromDate=t.date,a.value.toDate=t.date,a.value.fromDateTime=t.date+" "+t.fromTime,a.value.toDateTime=t.date+" "+t.toTime,a.value.fromTime=t.fromTime,a.value.toTime=t.toTime,y.updateEventState(a.value),S.value=!1,A.xAxis=0,A.yAxis=0),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",U))}}function J(r,k=0){return new Date(r.getFullYear(),r.getMonth(),r.getDate()+k)}function z(r,k){const H=new Date(o.value.parentNode.getAttribute("data-date-attr"));s.event.isFullDay&&(o.value.style.width="100%");let I=o.value.clientWidth,U=Math.floor((r-k.left)/I);const q=H.getDay(),G=6-H.getDay();U=We(U,q,G);let l=Math.ceil(U*I);A.xAxis=l,t.date=Q(J(H,U))}function We(r,k,H){return r<-k?r=-k:r>H&&(r=H),r}function Pe(r,k,H){let I=r-k,U=o.value.parentNode.getBoundingClientRect().top,q=o.value.parentNode.getBoundingClientRect().bottom;r<U&&(I=U-H.top),r>q&&(I=q-H.bottom),I=Math.round(I/_)*_,A.yAxis=I,t.fromTime=He(Ve(a.value.fromTime)+Math.round(I/v)),t.toTime=He(Ve(a.value.toTime)+Math.round(I/v)),xe()}function xe(){t.fromTime<"00:00:00"&&(t.fromTime="00:00:00"),t.fromTime>"24:00:00"&&(t.fromTime="24:00:00"),t.toTime<"00:00:00"&&(t.toTime="00:00:00"),t.toTime>"24:00:00"&&(t.toTime="24:00:00")}const De=()=>ee.value=!ee.value,ge=()=>ee.value=!1;function ze(r){(r.key==="Delete"||r.key==="Backspace")&&(ee.value=!1,Ie())}me(()=>ee.value,r=>{if(r){if(!n.isEditMode||!n.enableShortcuts)return;document.addEventListener("keydown",ze,{once:!0})}});let ve=null;function fe(r){if(te.value){te.value=!1;return}r.detail===1&&(ve=setTimeout(()=>{y.props.onClick?y.props.onClick({e:r,calendarEvent:a.value}):De()},200))}const Me=F(!1);function Te(r=null){if(r&&(r.cancelBubble=!0),clearTimeout(ve),y.props.onDblClick){y.props.onDblClick({e:r,calendarEvent:a.value});return}n.isEditMode&&(ge(),Me.value=!0)}function Ie(){y.deleteEvent(a.value.id),ge()}const Ae=O(()=>{try{const r=a.value.toDate||a.value.date||a.value.fromDate||s.event.toDate||s.event.date||s.event.fromDate;if(!r)return!1;let k="00:00:00";return a.value.isFullDay||s.event.isFullDay?k="23:59:59":a.value.toTime&&(k=a.value.toTime),new Date(`${r}T${k}`.replace(" ","T")).getTime()<new Date().getTime()}catch{return!1}});return(r,k)=>{var H,I,U,q;return u(),g(K,null,[e(f)!=="Month"?(u(),g("div",Ze({key:0,class:"event min-h-6 mx-px shadow rounded transition-all duration-75 shrink-0",ref_key:"eventRef",ref:o},r.$attrs,{class:[ee.value&&"!z-20 drop-shadow-xl",e(Je)==(((H=s.event)==null?void 0:H.id)||((I=s.event)==null?void 0:I.name))&&"active"],style:[E.value,C.value],onDblclick:k[0]||(k[0]=X(G=>Te(G),["prevent"])),onClick:k[1]||(k[1]=X(G=>fe(G),["prevent"]))},xt({mousedown:e(n).isEditMode&&pe},!0)),[i("div",{class:ne(["flex gap-1.5 h-full p-[5px]",Ae.value&&"past"])},[s.event.fromTime?(u(),g("div",{key:0,class:"event-border h-full w-[2px] rounded shrink-0",style:ce(p.value)},null,4)):L("",!0),i("div",xn,[e(n).showIcon&&e(V)[s.event.type]?(u(),g("div",Dn,[e(V)[s.event.type]?(u(),W(Re(e(V)[s.event.type]),{key:0,class:"h-4 w-4"})):L("",!0)])):L("",!0),i("div",bn,[i("p",{ref_key:"eventTitleRef",ref:D,class:ne(["text-sm font-medium event-title",c.value])},B(s.event.title||"(No title)"),3),s.event.isFullDay?L("",!0):(u(),g("p",{key:0,ref_key:"eventTimeRef",ref:M,class:"text-xs font-normal event-subtitle"},B(e(Dt)(t.fromTime,t.toTime,e(n).timeFormat)),513))])])],2),e(n).isEditMode&&!d.event.isFullDay?(u(),g("div",{key:0,class:"absolute -bottom-1 h-3 w-full cursor-ns-resize",ref_key:"resize",ref:re,onMousedown:ae},null,544)):L("",!0)],16)):(u(),g("div",Ze({key:1,class:["event flex gap-1.5 min-h-6 mx-px rounded p-[5px] transition-all duration-75",[e(Je)==(((U=s.event)==null?void 0:U.id)||((q=s.event)==null?void 0:q.name))&&"active",Ae.value&&"past"]],ref_key:"eventRef",ref:o},r.$attrs,{onDblclick:k[2]||(k[2]=X(G=>Te(G),["prevent"])),onClick:k[3]||(k[3]=X(G=>fe(G),["stop"])),style:C.value}),[s.event.fromTime?(u(),g("div",{key:0,class:"event-border w-[2px] rounded shrink-0",style:ce(p.value)},null,4)):L("",!0),i("div",wn,[e(n).showIcon&&e(V)[s.event.type]?(u(),g("div",kn,[e(V)[s.event.type]?(u(),W(Re(e(V)[s.event.type]),{key:0,class:"h-4 w-4 text-black"})):L("",!0)])):L("",!0),i("div",Cn,[i("p",Mn,B(s.event.title||"New Event"),1)])])],16)),ee.value?(u(),g("div",{key:2,ref_key:"floating",ref:P,style:ce({...e(R),zIndex:100}),class:"rounded shadow-xl"},[w(gn,{calendarEvent:a.value,date:d.date,isEditMode:e(n).isEditMode,onClose:ge,onEdit:Te,onDelete:Ie,class:"shadow-xl"},null,8,["calendarEvent","date","isEditMode"])],4)):L("",!0),w(rt,{modelValue:Me.value,"onUpdate:modelValue":k[4]||(k[4]=G=>Me.value=G),event:t},null,8,["modelValue","event"])],64)}}},Ce=Fe(En,[["__scopeId","data-v-93d3f327"]]),$n={__name:"ShowMoreCalendarEvent",props:{events:{type:Array,required:!0},date:{type:String,required:!0},totalEventsCount:{type:Number,required:!0}},emits:["showMoreEvents"],setup(d,{emit:s}){const f=s;return(n,y)=>(u(),g(K,null,[(u(!0),g(K,null,le(d.events.slice(0,2),x=>(u(),W(Ce,Ze({key:x.id,event:x,date:d.date,class:"mb-1 cursor-pointer"},{ref_for:!0},n.$attrs),null,16,["event","date"]))),128)),d.totalEventsCount>2?(u(),g("span",{key:0,class:"w-fit rounded-sm p-px px-2 mx-px text-base font-medium text-ink-gray-6 hover:cursor-pointer hover:bg-surface-gray-1",onClick:y[0]||(y[0]=x=>f("showMoreEvents"))},B(d.totalEventsCount-2)+" more ",1)):L("",!0)],64))}},Vn={class:"flex flex-1 flex-col overflow-scroll"},Sn={class:"grid w-full grid-cols-7"},Fn={class:"inline-flex items-center justify-center text-base text-ink-gray-6 h-8"},In=["onDrop","onClick"],An={class:"flex gap-0.5 w-full flex-col items-center text-xs text-right"},jn=["onClick"],Hn={key:0,class:"flex w-full flex-col justify-between"},Yn={key:1,class:"flex w-full flex-col justify-between"},Ln={__name:"CalendarMonthly",props:{events:{type:Object,required:!0},currentMonthDates:{type:Array,required:!0},currentMonth:{type:Number,required:!0},config:{type:Object}},emits:["setCurrentDate"],setup(d,{emit:s}){const f=d,n=s,y=O(()=>Se(f.events,"Month").timedEvents.value),x=O(()=>f.currentMonthDates.length>35?1:2);function a(E){return E.getMonth()===f.currentMonth}function t(E){let C=!1;return E.getMonth()===f.currentMonth-1&&(C=!0),C}function V(E){let C=!1;return E.getMonth()===f.currentMonth+1&&(C=!0),C}const v=de("calendarActions"),_=(E,C)=>{C&&(E.target.style.opacity="0.5",E.target.style.cursor="move",E.dataTransfer.dropEffect="move",E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("calendarEventID",C))},A=(E,C)=>{let p=E.dataTransfer.getData("calendarEventID");if(!p)return;E.target.style.cursor="default";let j=f.events.find(D=>D.id===p);if(Q(C)===j.date)return;let h=f.events.find(D=>D.id===p);h.date=Q(C),h.fromDate=h.date,h.toDate=h.date,h.fromDateTime=h.date+" "+h.fromTime,h.toDateTime=h.date+" "+h.toTime,v.updateEventState(h)};return(E,C)=>(u(),g("div",Vn,[i("div",Sn,[(u(!0),g(K,null,le(e(lt),p=>(u(),g("span",Fn,B(p),1))),256))]),i("div",{class:ne(["grid w-full flex-1 grid-cols-7 border-outline-gray-1",[d.currentMonthDates.length>35?"grid-rows-6":"grid-rows-5",!d.config.noBorder&&"border-[0.5px]"]])},[(u(!0),g(K,null,le(d.currentMonthDates,(p,j)=>{var h;return u(),g("div",{class:ne(["overflow-y-auto",[d.config.noBorder?"border-l border-t border-0":"border-[0.5px]",d.config.noBorder&&j%7===0&&"border-l-0",e(at)(p,d.config)&&"bg-surface-gray-1"]]),onDragover:C[4]||(C[4]=X(()=>{},["prevent"])),onDrageneter:C[5]||(C[5]=X(()=>{},["prevent"])),onDrop:D=>A(D,p),onClick:D=>e(v).handleCellClick(D,p)},[i("div",{class:ne(["flex justify-center font-normal",a(p)?"text-gray-700":"text-gray-200"])},[i("div",An,[i("span",{class:ne(["z-10 w-full flex justify-between items-center",[p.toDateString()===new Date().toDateString()?"p-[3px] pb-0.5":"p-2"]])},[C[6]||(C[6]=i("div",null,null,-1)),i("div",{class:ne(["cursor-pointer",[p.toDateString()===new Date().toDateString()?"flex items-center justify-center bg-surface-gray-7 text-ink-white rounded size-[25px]":"bg-surface-white ",a(p)?"text-ink-gray-6":"text-ink-gray-4"]]),onClick:X(D=>a(p)?e(v).updateActiveView("Day",p):e(v).updateActiveView("Day",p,t(p),V(p)),["stop"])},B(p.getDate()),11,jn)],2),((h=y.value[e(Q)(p)])==null?void 0:h.length)<=x.value?(u(),g("div",Hn,[(u(!0),g(K,null,le(y.value[e(Q)(p)],D=>(u(),W(Ce,{event:D,date:p,class:"z-10 mb-2 cursor-pointer",key:D.id,draggable:d.config.isEditMode,onDragstart:M=>_(M,D.id),onDragend:C[0]||(C[0]=M=>M.target.style.opacity="1"),onDragover:C[1]||(C[1]=X(()=>{},["prevent"]))},null,8,["event","date","draggable","onDragstart"]))),128))])):(u(),g("div",Yn,[y.value[e(Q)(p)]?(u(),W($n,{key:0,class:"z-10 cursor-pointer",draggable:d.config.isEditMode,onDragstart:D=>_(D,y.value[e(Q)(p)][0].id),onDragend:C[2]||(C[2]=D=>D.target.style.opacity="1"),onDragover:C[3]||(C[3]=X(()=>{},["prevent"])),events:y.value[e(Q)(p)],date:p,totalEventsCount:y.value[e(Q)(p)].length,onShowMoreEvents:D=>n("setCurrentDate",p)},null,8,["draggable","onDragstart","events","date","totalEventsCount","onShowMoreEvents"])):L("",!0)]))])],2)],42,In)}),256))],2)]))}},Rn={__name:"CalendarTimeMarker",props:{date:{type:[String,Date],required:!0}},setup(d){const n=de("config").hourHeight/60,y=O(()=>{let x=new Date,a=x.getHours(),t=x.getMinutes();return{top:(a*60+t)*n+"px"}});return(x,a)=>new Date(d.date).toDateString()===new Date().toDateString()?(u(),g("div",{key:0,class:"absolute top-20 z-10 w-full px-px",style:ce(y.value)},[w(we,{text:e(be)().format("ddd, MMM D, YYYY h:mm a")},{default:N(()=>[...a[0]||(a[0]=[i("div",{class:"current-time relative h-0.5 bg-[#E03636] rounded"},null,-1)])]),_:1},8,["text"])],4)):L("",!0)}},it=Fe(Rn,[["__scopeId","data-v-2ef223eb"]]),Bn={class:"flex flex-1 flex-col overflow-y-auto"},Wn={class:"flex border-b-[1px]"},Pn={class:"grid w-full grid-cols-7"},zn=["onClick"],Un={key:0,class:"inline-flex items-center justify-center bg-surface-gray-7 text-ink-white rounded size-[25px]"},Nn={class:"flex justify-center items-start py-0.5 w-20 text-base text-ink-gray-6 text-center"},On={class:"grid w-full grid-cols-7 overflow-hidden"},qn=["data-date-attr","onClick"],Zn={class:"flex"},Jn={class:"grid w-20 grid-cols-1"},Gn={class:"relative flex w-full flex-col"},Xn={class:"grid w-full grid-cols-7"},Qn=["data-date-attr"],Kn=["data-time-attr","onClick"],el={__name:"CalendarWeekly",props:{events:{type:Object,required:!0},config:{type:Object},weeklyDates:{type:Array,required:!1}},setup(d){const s=d,f=F(null),n=F(!1),y=F(!0),x=s.config.hourHeight,a=x/60,t=s.config.timeFormat=="24h"?ot:st,V=O(()=>Se(s.events).timedEvents.value),v=O(()=>Se(s.events).fullDayEvents.value),_=h=>new Date(h).toDateString()===new Date().toDateString(),A=O(()=>{let h=new Date,D=h.getHours(),M=h.getMinutes();return{top:(D*60+M)*a+"px"}}),E=de("calendarActions");function C(h,D){let M={},c=Object.keys(h);return D.forEach(o=>{o=Q(o),c.includes(o)&&(M[o]=h[o])}),M}function p(h){let D=[];return Object.values(h).forEach(c=>{D.push(c.length)}),Math.max(...D,1)}function j(h,D){let M=C(h,D);p(M)>3?n.value=!0:n.value=!1}return Be(()=>{j(v.value,s.weeklyDates);const h=new Date().getHours(),D=s.config.scrollToHour||h;f.value.scrollBy(0,D*60*a-10)}),me(()=>v.value,h=>{j(h,s.weeklyDates)}),me(()=>s.weeklyDates,h=>{j(v.value,h)}),(h,D)=>(u(),g("div",Bn,[i("div",Wn,[D[3]||(D[3]=i("div",{class:"w-20"},null,-1)),i("div",Pn,[(u(!0),g(K,null,le(d.weeklyDates,M=>(u(),g("span",{class:"relative flex items-center justify-center gap-1.5 h-8 text-center text-base text-ink-gray-7 cursor-pointer",onClick:c=>e(E).updateActiveView("Day",M)},[Ye(B(_(M)?e(lt)[M.getDay()]:e(bt)(M))+" ",1),_(M)?(u(),g("span",Un,B(M.getDate()),1)):L("",!0)],8,zn))),256))])]),i("div",{class:ne(["flex shrink-0 h-fit",[d.config.noBorder?"border-b-[1px]":"border-[1px] border-t-0"]])},[i("div",Nn,[(u(),W(Re(n.value?e(oe):"div"),{class:ne({"!pl-1.5 pr-1 py-1 !gap-1":n.value}),variant:"ghost",iconRight:n.value?y.value?"chevron-down":"chevron-up":"",onClick:D[0]||(D[0]=M=>n.value&&(y.value=!y.value))},{default:N(()=>[...D[4]||(D[4]=[i("div",{class:"text-sm text-ink-gray-6 h-[29px] inline-flex items-center"}," All day ",-1)])]),_:1},8,["class","iconRight"]))]),i("div",On,[(u(!0),g(K,null,le(d.weeklyDates,(M,c)=>{var o,P,R;return u(),g("div",{class:"cell flex flex-col gap-1 py-1 w-full cursor-pointer","data-date-attr":M,onClick:X(ee=>{var re;((re=v.value[e(Q)(M)])==null?void 0:re.length)>1&&(y.value=!1),e(E).handleCellClick(ee,M,"",!0)},["prevent"])},[(u(!0),g(K,null,le(!n.value||!y.value?v.value[e(Q)(M)]:(o=v.value[e(Q)(M)])==null?void 0:o.slice(0,2),(ee,re)=>(u(),W(Ce,{class:"w-[90%] cursor-pointer",event:{...ee,idx:re},key:ee.id,date:M,onClick:D[1]||(D[1]=X(()=>{},["stop"]))},null,8,["event","date"]))),128)),n.value&&y.value&&((P=v.value[e(Q)(M)])==null?void 0:P.length)>2?(u(),W(e(oe),{key:0,label:((R=v.value[e(Q)(M)])==null?void 0:R.length)-2+" more",variant:"ghost",class:"w-fit text-sm !py-0.5 !h-5 !justify-start cursor-pointer",onClick:D[2]||(D[2]=X(ee=>y.value=!1,["stop"]))},null,8,["label"])):L("",!0)],8,qn)}),256))])],2),i("div",{class:ne(["relative flex h-full flex-col overflow-auto border-outline-gray-1",[d.config.noBorder?"":"border-b-[1px] border-l-[1px]"]]),ref_key:"gridRef",ref:f},[i("div",Zn,[i("div",Jn,[(u(),g(K,null,le(24,M=>i("span",{class:"flex items-end justify-center text-center text-sm font-normal text-ink-gray-5",style:ce({height:`${e(x)}px`})},null,4)),64))]),i("div",Gn,[i("div",{class:"w-[calc(100%-4px)] h-px z-[2] left-0.5 mt-[0.5px] bg-[#F79596] absolute",style:ce(A.value)},null,4),i("div",Xn,[(u(!0),g(K,null,le(d.weeklyDates,(M,c)=>(u(),g("div",{class:ne(["relative w-full border-outline-gray-1",[c===0&&"calendar-column border-l-[1px]",d.config.noBorder&&c===d.weeklyDates.length-1?"":"border-r-[1px]",e(at)(M,d.config)&&"bg-surface-gray-1"]]),"data-date-attr":M},[(u(!0),g(K,null,le(e(t),(o,P)=>(u(),g("div",{class:"cell relative flex cursor-pointer text-ink-gray-8",key:o,"data-time-attr":P==0?"":o,onClick:X(R=>e(E).handleCellClick(R,M,o),["prevent"])},[i("div",{class:ne(["border-outline-gray-1 w-full",P!==e(t).length-1&&"border-b-[1px]"]),style:ce({height:`${e(x)}px`})},null,6)],8,Kn))),128)),(u(!0),g(K,null,le(V.value[e(Q)(M)],(o,P)=>(u(),W(Ce,{class:"absolute mb-2 w-[90%] cursor-pointer",event:o,key:o.id,date:M},null,8,["event","date"]))),128)),w(it,{date:M},null,8,["date"])],10,Qn))),256))])])])],2)]))}},tl={class:"flex flex-col flex-1 overflow-y-auto"},nl={class:"flex justify-center items-start pt-[3px] w-20 text-base text-ink-gray-6 text-center"},ll=["data-date-attr"],al={class:"h-full overflow-hidden"},ol={class:"grid h-full w-20 grid-cols-1"},sl={class:"grid h-full w-full grid-cols-1 pb-2"},rl=["data-time-attr","onClick"],il={__name:"CalendarDaily",props:{events:{type:Object,required:!1},config:{type:Object},currentDate:{type:Object,required:!0}},setup(d){const s=d,f=O(()=>Se(s.events).timedEvents.value),n=O(()=>Se(s.events).fullDayEvents.value),y=F(null),x=s.config.hourHeight,a=x/60,t=F(!1),V=F(!0),v=O(()=>{var C;return((C=n.value)==null?void 0:C[Q(s.currentDate)])||[]});function _(){t.value=v.value.length>4,t.value||(V.value=!0)}me(v,_,{immediate:!0});const A=s.config.timeFormat=="24h"?ot:st;Be(()=>{const C=new Date().getHours(),p=s.config.scrollToHour||C;y.value.scrollBy(0,p*60*a-10)});const E=de("calendarActions");return(C,p)=>(u(),g("div",tl,[i("div",{class:ne(["flex shrink-0 h-fit",[d.config.noBorder?"border-t-[1px]":"border-[1px] border-b-0"]])},[i("div",nl,[(u(),W(Re(t.value?e(oe):"div"),{class:ne({"!pl-1.5 pr-1 py-1 !gap-1":t.value}),variant:"ghost",iconRight:t.value?V.value?"chevron-down":"chevron-up":"",onClick:p[0]||(p[0]=j=>t.value&&(V.value=!V.value))},{default:N(()=>[...p[4]||(p[4]=[i("div",{class:"text-sm text-ink-gray-6 h-7 inline-flex items-center"}," All day ",-1)])]),_:1},8,["class","iconRight"]))]),i("div",{class:"flex flex-wrap gap-1 py-1 w-full overflow-hidden","data-date-attr":d.currentDate,onClick:p[3]||(p[3]=X(j=>e(E).handleCellClick(j,d.currentDate,"",!0),["prevent"]))},[(u(!0),g(K,null,le(!t.value||!V.value?v.value:v.value.slice(0,4),(j,h)=>(u(),W(Ce,{class:"w-[21%] cursor-pointer",event:{...j,idx:h},key:j.id,date:d.currentDate,onClick:p[1]||(p[1]=X(()=>{},["stop"]))},null,8,["event","date"]))),128)),t.value&&V.value&&v.value.length>4?(u(),W(e(oe),{key:0,label:v.value.length-4+" more",variant:"ghost",class:"w-fit text-sm !h-6 !justify-start cursor-pointer",onClick:p[2]||(p[2]=X(j=>V.value=!1,["stop"]))},null,8,["label"])):L("",!0)],8,ll)],2),i("div",al,[i("div",{class:ne(["flex h-full w-full overflow-scroll border-outline-gray-1",[d.config.noBorder?"border-t-[1px]":"border-[1px] border-r-0"]]),ref_key:"gridRef",ref:y},[i("div",ol,[(u(),g(K,null,le(24,j=>i("span",{class:"flex h-[72px] items-end justify-center text-center text-sm font-normal text-ink-gray-5",style:ce({height:`${e(x)}px`})},null,4)),64))]),i("div",sl,[i("div",{class:ne(["calendar-column relative border-l-[1px] border-outline-gray-1",[d.config.noBorder?"":" border-r-[1px]"]])},[(u(!0),g(K,null,le(e(A),(j,h)=>(u(),g("div",{class:"relative flex text-ink-gray-8",key:j,"data-time-attr":h==0?"":j,onClick:D=>e(E).handleCellClick(D,d.currentDate,j)},[i("div",{class:ne(["w-full border-outline-gray-1",h!==e(A).length-1&&"border-b-[1px]"]),style:ce({height:`${e(x)}px`})},null,6)],8,rl))),128)),(u(!0),g(K,null,le(f.value[e(Q)(d.currentDate)],(j,h)=>(u(),W(Ce,{class:"absolute mb-2 cursor-pointer",event:j,key:j.id,date:d.currentDate},null,8,["event","date"]))),128)),w(it,{date:d.currentDate},null,8,["date"])],2)])],2)])]))}};function ul(){const d=F(!1),s=ke({date:"",participant:"",fromDate:"",toDate:"",fromTime:"",toTime:"",venue:"",title:"",isFullDay:!1});function f(n,y,x,a,t="",V=!1){if(!a)return;if(x=y==="Week"?n.target.parentNode.parentNode.getAttribute("data-date-attr"):x,s.date=Q(new Date(x)),s.fromDate=x,s.toDate=x,s.isFullDay=V,y==="Month"){d.value=!0;return}let v=He(Ve(t)+60).slice(0,-3);s.fromTime=t,s.toTime=v,d.value=!0}return{showEventModal:d,newEvent:s,openNewEventModal:f}}const dl={class:"flex h-full flex-col overflow-hidden"},cl={class:"mb-2 flex justify-between"},vl={class:"flex items-center"},fl={class:"flex gap-x-1"},ml={__name:"Calendar",props:{events:{type:Object,required:!1,default:[]},config:{type:Object},onClick:{type:Function,required:!1},onDblClick:{type:Function,required:!1},onCellClick:{type:Function,required:!1}},emits:["create","update","delete"],setup(d,{expose:s,emit:f}){const n=d,y=f,a={...{scrollToHour:15,disableModes:[],defaultMode:"Month",isEditMode:!1,eventIcons:{},hourHeight:50,enableShortcuts:!0,showIcon:!0,timeFormat:"12h",weekends:["sunday"]},...n.config};let t=F(a.defaultMode);function V(l,m,b,Y){t.value=l,l=="Day"&&m&&(z.value=I(m),b&&fe(),Y&&ve())}const v=F(be().format("YYYY-MM-DD"));function _(l=""){const m=be(l);v.value=m.format("YYYY-MM-DD"),G(v.value)}function A(l,m){if(typeof l=="number"&&typeof m=="number"){const b=be(v.value).date();let Y=be(`${l}-${String(m+1).padStart(2,"0")}-01`).date(b);Y.month()!==m&&(Y=Y.startOf("month").month(m).endOf("month")),v.value=Y.format("YYYY-MM-DD")}}Be(()=>{a.enableShortcuts&&window.addEventListener("keydown",E)}),wt(()=>{window.removeEventListener("keydown",E)});function E(l){l.target.tagName==="INPUT"||l.target.tagName==="TEXTAREA"||l.target.isContentEditable||(l.key.toLowerCase()==="m"&&(t.value="Month"),l.key.toLowerCase()==="w"&&(t.value="Week"),l.key.toLowerCase()==="d"&&(t.value="Day"),l.key.toLowerCase()==="t"&&G(),l.key==="ArrowLeft"&&De(),l.key==="ArrowRight"&&xe())}Oe("activeView",t),Oe("config",a);const C=O(()=>{var l;return((l=n.events)==null?void 0:l.map(m=>{const{fromDate:b,toDate:Y,fromTime:Z,toTime:se,...ie}=m,je=b,Ue=b+" "+Z,_e=Y+" "+se;return{...ie,date:je,fromDateTime:Ue,toDateTime:_e,fromDate:b,toDate:Y,fromTime:Z,toTime:se}}))||[]}),p=F(C.value);me(()=>n.events,()=>j(),{deep:!0});function j(){p.value=C.value}p.value.forEach(l=>{!l.fromTime||!l.toTime||(l.fromTime=Le(l.fromTime),l.toTime=Le(l.toTime))});const{showEventModal:h,newEvent:D,openNewEventModal:M}=ul();Oe("calendarActions",{createNewEvent:c,updateEventState:o,deleteEvent:P,handleCellClick:ee,updateActiveView:V,props:n});function c(l){p.value.push(l),l.fromDateTime=l.fromDate+" "+l.fromTime,l.toDateTime=l.toDate+" "+l.toTime,y("create",l)}function o(l){const m=l.id;let b=p.value.findIndex(Y=>Y.id===m);l.fromDateTime=l.fromDate+" "+l.fromTime,l.toDateTime=l.toDate+" "+l.toTime,p.value[b]=l,y("update",l)}function P(l){const m=p.value.findIndex(b=>b.id===l);p.value.splice(m,1),y("delete",l)}function R(l){const{e:m,view:b,date:Y,time:Z,isFullDay:se}=l,ie=a.isEditMode;M(m,b,Y,ie,Z,se)}function ee(l,m,b="",Y=!1){const Z={e:l,view:t.value,date:m,time:b,isFullDay:Y};if(n.onCellClick){n.onCellClick(Z);return}R(Z)}let $=[{label:"Day",value:"Day",iconLeft:Zt},{label:"Week",value:"Week",iconLeft:Qt},{label:"Month",value:"Month",iconLeft:nn}].filter(l=>!a.disableModes.includes(l.value)),T=F(new Date().getFullYear()),S=F(new Date().getMonth()),ye=F(new Date),te=O(()=>kt(S.value,T.value)),ae=O(()=>{let l=[...te.value],m=[];for(;l.length;){let b=l.splice(0,7);m.push(b)}return m});function pe(l){return ae.value.findIndex(m=>m.find(b=>new Date(b).toLocaleDateString().split("T")[0]===new Date(l).toLocaleDateString().split("T")[0]))}let J=F(pe(ye.value)),z=F(te.value.findIndex(l=>new Date(l).toDateString()===ye.value.toDateString())),We=O(()=>te.value[z.value]);function Pe(l){t.value="Day",z.value=I(l),J.value=pe(l)}function xe(){ge[t.value](),A(T.value,S.value)}function De(){ze[t.value](),A(T.value,S.value)}const ge={Month:ve,Week:Me,Day:Ie},ze={Month:fe,Week:Te,Day:Ae};function ve(){S.value++,S.value>11&&(S.value=0,T.value++),z.value=H(S.value,T.value),J.value=pe(te.value[z.value])}function fe(){S.value===0?(S.value=11,T.value--):S.value--,z.value=k(S.value,T.value),J.value=pe(te.value[z.value])}function Me(){const l=J.value+1;if(l<ae.value.length){J.value=l;const Y=ae.value[J.value];if(Y.some(ie=>ie.getMonth()!==S.value)){ve(),J.value=0;const ie=ae.value[0],je=r(ie,S.value);z.value=I(je);return}const se=r(Y,S.value);z.value=I(se);return}ve(),J.value=0;const m=ae.value[0],b=r(m,S.value);z.value=I(b)}function Te(){const l=J.value-1;if(l>=0){J.value=l;const ie=ae.value[J.value];if(ie.some(_e=>_e.getMonth()!==S.value)){fe(),J.value=ae.value.length-1;const _e=ae.value[J.value],ut=r(_e,S.value);z.value=I(ut);return}const Ue=r(ie,S.value);z.value=I(Ue);return}fe();let m=ae.value.length-1;ae.value[m].some(ie=>ie.getMonth()!==S.value)&&m>0&&(m=m-1),J.value=m;const Z=ae.value[J.value],se=r(Z,S.value);z.value=I(se)}function Ie(){z.value++,(z.value>te.value.length-1||!q(te.value[z.value]))&&ve()}function Ae(){z.value--,(z.value<0||!q(te.value[z.value]))&&fe()}function r(l,m){return l.find(b=>b.getMonth()===m)||l[0]}function k(l,m){let b=new Date(m,l+1,0);return te.value.findIndex(Z=>new Date(Z).toDateString()===b.toDateString())}function H(l,m){let b=new Date(m,l,1);return te.value.findIndex(Z=>new Date(Z).toDateString()===b.toDateString())}function I(l){return te.value.findIndex(m=>new Date(m).toDateString()===new Date(l).toDateString())}const U=O(()=>{if(t.value==="Day"){const se=te.value[z.value];if(se)return be(se).format("ddd, D MMM YYYY")}if(t.value!=="Week")return Ne(S.value,T.value);const l=ae.value[J.value]||[];if(!l.length)return Ne(S.value,T.value);const m=Ct(l);if(m.length===1)return Ne(m[0].month,m[0].year);const b=Mt.map(se=>se.slice(0,3)),Y=m[0],Z=m[m.length-1];return Y.year===Z.year?`${b[Y.month]} - ${b[Z.month]} ${Y.year}`:`${b[Y.month]} ${Y.year} - ${b[Z.month]} ${Z.year}`});function q(l){return l=new Date(l),l.getMonth()===S.value}function G(l){const m=l?new Date(l):new Date;m.toString()!=="Invalid Date"&&(T.value=m.getFullYear(),S.value=m.getMonth(),ye.value=m,Tt(()=>{J.value=pe(m);const b=I(m);b>=0?z.value=b:z.value=H(S.value,T.value)}))}return s({reloadEvents:j,currentMonthYear:U,currentYear:T,currentMonth:S,enabledModes:$,activeView:t,decrement:De,increment:xe,updateActiveView:V,setCalendarDate:G,onMonthYearChange:_,selectedMonthDate:v}),(l,m)=>(u(),g("div",dl,[Ge(l.$slots,"header",Qe(Ke({currentMonthYear:U.value,currentYear:e(T),currentMonth:e(S),enabledModes:e($),activeView:e(t),decrement:De,increment:xe,updateActiveView:V,setCalendarDate:G,onMonthYearChange:_,selectedMonthDate:v.value})),()=>[i("div",cl,[i("div",vl,[w(_t,{modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=b=>_(b)),clearable:!1},{target:N(({togglePopover:b})=>[w(e(oe),{variant:"ghost",class:"text-lg font-medium text-ink-gray-7",label:U.value,iconRight:"chevron-down",onClick:b},null,8,["label","onClick"])]),_:1},8,["modelValue"])]),i("div",fl,[w(e(oe),{onClick:De,variant:"ghost",icon:"chevron-left"}),w(e(oe),{label:"Today",onClick:m[1]||(m[1]=b=>G()),variant:"ghost"}),w(e(oe),{onClick:xe,variant:"ghost",icon:"chevron-right"}),w(e(zt),{buttons:e($),class:"ml-2",modelValue:e(t),"onUpdate:modelValue":m[2]||(m[2]=b=>Xe(t)?t.value=b:t=b)},null,8,["buttons","modelValue"])])])]),e(t)==="Month"?(u(),W(Ln,{key:0,events:p.value,currentMonth:e(S),currentMonthDates:e(te),config:a,onSetCurrentDate:m[3]||(m[3]=b=>Pe(b))},null,8,["events","currentMonth","currentMonthDates"])):e(t)==="Week"?(u(),W(el,{key:1,events:p.value,weeklyDates:e(ae)[e(J)],config:a},null,8,["events","weeklyDates"])):e(t)==="Day"?(u(),W(il,{key:2,events:p.value,"current-date":e(We),config:a},{header:N(({parseDateWithDay:b,currentDate:Y,fullDay:Z})=>[Ge(l.$slots,"daily-header",Qe(Ke({parseDateWithDay:b,currentDate:Y,fullDay:Z})))]),_:3},8,["events","current-date"])):L("",!0),e(h)?(u(),W(rt,{key:3,modelValue:e(h),"onUpdate:modelValue":m[4]||(m[4]=b=>Xe(h)?h.value=b:null),event:e(D)},null,8,["modelValue","event"])):L("",!0)]))}},pl={class:"space-y-1"},gl={key:0,class:"block text-xs text-ink-gray-5"},hl={class:"flex text-center"},yl=["onMouseover"],xl={__name:"Rating",props:{id:{type:String,default:""},modelValue:{type:Number,default:0},label:{type:String,default:""},size:{type:String,default:"md"}},emits:["update:modelValue"],setup(d,{emit:s}){const f=d,n=v=>{let _=[{sm:"size-4",md:"size-5",lg:"size-6",xl:"size-7"}[f.size]];return v<=a.value&&v>x.value?_.push("fill-yellow-200"):v<=x.value&&_.push("fill-yellow-500"),_.join(" ")},y=s,x=F(f.modelValue),a=F(0);let t=v=>{y("update:modelValue",v)};function V(v){t(v),x.value=v}return me(()=>f.modelValue,v=>{x.value=v}),(v,_)=>(u(),g("div",pl,[f.label?(u(),g("label",gl,B(f.label),1)):L("",!0),i("div",hl,[(u(),g(K,null,le(5,A=>i("div",{onMouseover:E=>a.value=A,onMouseleave:_[0]||(_[0]=E=>a.value=0)},[w(e(Et),{class:ne(["fill-gray-400 text-gray-50 stroke-1 mr-1 cursor-pointer",n(A)]),onClick:E=>V(A)},null,8,["class","onClick"])],40,yl)),64))])]))}},Dl={class:"flex text-base"},bl={class:"flex flex-col w-1/2 p-5"},wl={class:"text-lg font-semibold mb-4"},kl={class:"flex flex-col space-y-4 text-sm text-ink-gray-8"},Cl={class:"flex items-center space-x-2 w-fit"},Ml={class:"flex items-center space-x-2 w-fit"},Tl={class:"flex items-center space-x-2 w-fit"},_l={class:"flex items-center space-x-2 w-fit"},El={class:"flex items-center space-x-2 w-fit"},$l={class:"flex items-center space-x-2 mt-auto"},Vl={key:0,class:"flex flex-col space-y-4 p-5"},Sl={class:"flex items-center justify-between"},Fl={key:1,class:"flex flex-col space-y-4 p-5"},Il={__name:"Event",props:$t({event:{type:[Object,null],required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const s=Vt(d,"modelValue"),f=de("$dayjs"),n=F(0),y=F(!1),x=d,a=ke({}),t=ke({}),V=Ee({url:"frappe.client.get_value",makeParams(c){return{doctype:"Property Setter",fieldname:"value",filters:{doc_type:"LMS Certificate",property:"default_print_format"}}},auto:!0,onSuccess(c){t.template=c.value}}),v=c=>{window.open(c,"_blank")},_=Ee({url:"wg_lms.lms.api.save_evaluation_details",makeParams(c){return{member:x.event.member,course:x.event.course,batch_name:x.event.batch_name,date:x.event.date,start_time:x.event.start_time,end_time:x.event.end_time,status:a.status,rating:a.rating,summary:a.summary,evaluator:x.event.evaluator}},auto:!1,onSuccess(c){a.name=c.name}}),A=Ee({url:"frappe.client.get",makeParams(c){return{doctype:"LMS Certificate Evaluation",filters:{member:x.event.member,course:x.event.course}}},onSuccess(c){for(const o in c)o in a&&(a[o]=c[o]),o=="rating"&&(a.rating=c.rating*5),a.status=="Pass"&&(y.value=!0)},auto:!1}),E=()=>{_.submit({},{onSuccess:()=>{a.status=="Pass"?y.value=!0:s.value=!1,$e.success(__("Evaluation saved successfully"))},onError(c){var o;$e.warning(__(((o=c.messages)==null?void 0:o[0])||c))}})},C=Ee({url:"wg_lms.lms.api.save_certificate_details",makeParams(c){return{member:x.event.member,course:x.event.course,batch_name:x.event.batch_name,published:t.published,issue_date:t.issue_date,expiry_date:t.expiry_date,template:t.template,evaluator:x.event.evaluator}},auto:!1,onSuccess(c){t.name=c},onError(c){var o;$e.warning(__(((o=c.messages)==null?void 0:o[0])||c))}}),p=Ee({url:"frappe.client.get",makeParams(c){return{doctype:"LMS Certificate",filters:{member:x.event.member,course:x.event.course}}},onSuccess(c){for(const o in c)o in t&&(t[o]=c[o]),t.name=c.name,y.value=!0},onError(c){t.template=V.data.value},auto:!1}),j=()=>{C.submit({},{onSuccess:()=>{$e.success(__("Certificate saved successfully"))},onError(c){var o;$e.error(__(((o=c.messages)==null?void 0:o[0])||c))}})};me(s,()=>{s.value&&(a.rating=0,a.status="Pending",a.summary="",A.reload(),t.published=!0,t.issue_date=f().format("YYYY-MM-DD"),t.expiry_date=null,t.template=null,t.name=null,p.reload())});const h=c=>{window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${c.name}&format=${encodeURIComponent(c.template)}`)},D=O(()=>[{value:"Pending",label:__("Pending")},{value:"In Progress",label:__("In Progress")},{value:"Pass",label:__("Pass")},{value:"Fail",label:__("Fail")}]),M=O(()=>{const c=[{label:__("Evaluation"),icon:St}];return y.value&&c.push({label:__("Certification"),icon:Ft}),c});return(c,o)=>(u(),W(e(tt),{modelValue:s.value,"onUpdate:modelValue":o[12]||(o[12]=P=>s.value=P),options:{size:"2xl"}},{body:N(()=>[i("div",Dl,[i("div",bl,[i("div",wl,B(d.event.title),1),i("div",kl,[w(e(we),{text:c.__("Email ID")},{default:N(()=>[i("div",Cl,[w(e(It),{class:"h-4 w-4 stroke-1.5"}),i("span",null,B(d.event.member),1)])]),_:1},8,["text"]),w(e(we),{text:c.__("Course")},{default:N(()=>[i("div",Ml,[w(e(At),{class:"h-4 w-4 stroke-1.5"}),i("span",null,B(d.event.course_title),1)])]),_:1},8,["text"]),d.event.batch_title?(u(),W(e(we),{key:0,text:c.__("Batch")},{default:N(()=>[i("div",Tl,[w(e(jt),{class:"h-4 w-4 stroke-1.5"}),i("span",null,B(d.event.batch_title),1)])]),_:1},8,["text"])):L("",!0),w(e(we),{text:c.__("Date")},{default:N(()=>[i("div",_l,[w(e(Ht),{class:"h-4 w-4 stroke-1.5"}),i("span",null,B(e(f)(d.event.date).format("DD MMM YYYY")),1)])]),_:1},8,["text"]),w(e(we),{text:c.__("Time")},{default:N(()=>[i("div",El,[w(e(Yt),{class:"h-4 w-4 stroke-1.5"}),i("span",null,B(e(et)(d.event.start_time))+" - "+B(e(et)(d.event.end_time)),1)])]),_:1},8,["text"])]),i("div",$l,[t.name?(u(),W(e(oe),{key:0,onClick:o[0]||(o[0]=P=>h(t)),class:"w-full"},{prefix:N(()=>[w(e(Lt),{class:"h-4 w-4 stroke-1.5"})]),default:N(()=>[Ye(" "+B(c.__("View Certificate")),1)]),_:1})):(u(),W(e(oe),{key:1,onClick:o[1]||(o[1]=P=>v(d.event.venue)),class:"w-full"},{prefix:N(()=>[w(e(Rt),{class:"h-4 w-4 stroke-1.5"})]),default:N(()=>[i("span",null,B(c.__("Join Meeting")),1)]),_:1}))])]),w(e(Ut),{tabs:M.value,as:"div",modelValue:n.value,"onUpdate:modelValue":o[11]||(o[11]=P=>n.value=P),class:"border-l w-1/2"},{"tab-panel":N(({tab:P})=>[P.label=="Evaluation"?(u(),g("div",Vl,[i("div",Sl,[w(xl,{modelValue:a.rating,"onUpdate:modelValue":o[2]||(o[2]=R=>a.rating=R),label:c.__("Rating")},null,8,["modelValue","label"]),w(e(ue),{type:"select",options:D.value,modelValue:a.status,"onUpdate:modelValue":o[3]||(o[3]=R=>a.status=R),label:c.__("Status"),class:"w-1/2"},null,8,["options","modelValue","label"])]),w(e(Bt),{modelValue:a.summary,"onUpdate:modelValue":o[4]||(o[4]=R=>a.summary=R),label:c.__("Summary"),rows:7},null,8,["modelValue","label"]),w(e(oe),{variant:"solid",onClick:o[5]||(o[5]=R=>E())},{default:N(()=>[Ye(B(c.__("Save")),1)]),_:1})])):(u(),g("div",Fl,[w(e(ue),{type:"checkbox",modelValue:t.published,"onUpdate:modelValue":o[6]||(o[6]=R=>t.published=R),label:c.__("Published")},null,8,["modelValue","label"]),w(Wt,{modelValue:t.template,"onUpdate:modelValue":o[7]||(o[7]=R=>t.template=R),label:c.__("Template"),doctype:"Print Format",filters:{doc_type:"LMS Certificate"}},null,8,["modelValue","label"]),w(e(ue),{type:"date",modelValue:t.issue_date,"onUpdate:modelValue":o[8]||(o[8]=R=>t.issue_date=R),label:c.__("Issue Date")},null,8,["modelValue","label"]),w(e(ue),{type:"date",modelValue:t.expiry_date,"onUpdate:modelValue":o[9]||(o[9]=R=>t.expiry_date=R),label:c.__("Expiry Date")},null,8,["modelValue","label"]),w(e(oe),{variant:"solid",onClick:o[10]||(o[10]=R=>j())},{default:N(()=>[Ye(B(c.__("Save")),1)]),_:1})]))]),_:1},8,["tabs","modelValue"])])]),_:1},8,["modelValue"]))}},Al={class:"mt-7 mb-20"},jl={class:"flex h-screen flex-col overflow-hidden"},Hl={class:"mb-2 flex justify-between"},Yl={class:"text-lg text-ink-gray-9 font-semibold"},Ll={class:"flex gap-x-1"},zl={__name:"ProfileEvaluationSchedule",props:{profile:{type:Object,required:!0}},setup(d){var a,t;const s=de("$user"),f=F(null),n=F(!1),y=Pt({doctype:"LMS Certificate Request",filters:{evaluator:(a=s.data)==null?void 0:a.name,status:["!=","Cancelled"]},fields:["name","member_name","member","course","course_title","batch_name","batch_title","evaluator","evaluator_name","date","start_time","end_time","google_meet_link"],auto:!0,orderBy:"creation desc",pageLength:500,cache:["schedule",(t=s.data)==null?void 0:t.name],transform(V){return V.map(v=>{let _=Object.assign({},v);return _.title=`${v.member_name}'s Evaluation`,_.participant=v.member_name,_.id=v.name,_.venue=v.google_meet_link,_.fromDate=`${v.date}`,_.toDate=`${v.date}`,_.fromTime=v.start_time,_.toTime=v.end_time,_.color="green",_})}}),x=V=>{f.value=V.calendarEvent,n.value=!0};return(V,v)=>{var _;return u(),g(K,null,[i("div",Al,[i("div",jl,[(_=e(y).data)!=null&&_.length?(u(),W(e(ml),{key:0,config:{defaultMode:"Week",disableModes:["Day","Week"],redundantCellHeight:100,enableShortcuts:!1},events:e(y).data,onClick:v[0]||(v[0]=A=>x(A))},{header:N(({currentMonthYear:A,decrement:E,increment:C})=>[i("div",Hl,[i("span",Yl,B(A),1),i("div",Ll,[w(e(oe),{onClick:p=>E(),variant:"ghost",class:"h-4 w-4",icon:"chevron-left"},null,8,["onClick"]),w(e(oe),{onClick:p=>C(),variant:"ghost",class:"h-4 w-4",icon:"chevron-right"},null,8,["onClick"])])])]),_:1},8,["events"])):L("",!0)])]),w(Il,{modelValue:n.value,"onUpdate:modelValue":v[1]||(v[1]=A=>n.value=A),event:f.value},null,8,["modelValue","event"])],64)}}};export{zl as default};
//# sourceMappingURL=ProfileEvaluationSchedule-CsOr03uP.js.map
