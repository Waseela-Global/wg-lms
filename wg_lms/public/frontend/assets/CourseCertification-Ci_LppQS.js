import{y as m,x as D,i as v,p as S,z as $,c as j,A as h,B,E as Y,a as d,o as i,e as a,f as E,u as s,t as c,h as L,b as R,F as V}from"./index-CZIp1LU6.js";import{_ as z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-B2fdcvTt.js";import{_ as F}from"./UpcomingEvaluations-CqwW5TBi.js";import"./use-resolve-button-type-Bt-hu_zP.js";const I={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},O={class:"p-5"},q={key:0},A={class:"text-lg text-ink-gray-9 font-semibold mb-1"},P={class:"text-ink-gray-9 text-sm"},T={class:"text-ink-gray-9 font-semibold"},U={class:"text-sm text-ink-gray-7 font-medium"},G={key:1},X={__name:"CourseCertification",props:{courseName:{type:String,required:!0}},setup(y){var f,_;const o=m(null),p=m(null),{brand:b}=D(),l=m([]),u=v("$user"),C=v("$dayjs"),g=S(),t=y;$(()=>{k(),N()});const r=j({url:"frappe.client.get_value",params:{doctype:"LMS Certificate",filters:{member:(f=u.data)==null?void 0:f.name,course:t.courseName},fieldname:["name","template","issue_date"]},cache:[(_=u.data)==null?void 0:_.name,t.courseName]}),k=()=>{var e;h("frappe.client.get_value",{doctype:"LMS Enrollment",filters:{member:(e=u.data)==null?void 0:e.name,course:t.courseName},fieldname:["purchased_certificate"]}).then(n=>{n.purchased_certificate?r.reload():g.push({name:"CourseDetail",params:{courseName:t.courseName}})})},N=()=>{h("frappe.client.get_value",{doctype:"LMS Course",filters:{name:t.courseName},fieldname:["title","evaluator"]}).then(e=>{o.value=e.title,p.value=e.evaluator,x()})},x=()=>{l.value=[{course:t.courseName,title:o.value,evaluator:p.value}]},M=e=>{window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${e.name}&format=${encodeURIComponent(e.template)}`,"_blank")},w=B(()=>[{label:__("Courses"),route:{name:"Courses"}},{label:o.value,route:{name:"CourseDetail",params:{courseName:t.courseName}}},{label:__("Certification")}]);return Y(()=>({title:o.value,icon:b.favicon})),(e,n)=>(i(),d(V,null,[a("header",I,[E(s(z),{class:"h-7",items:w.value},null,8,["items"])]),a("div",O,[s(r).data&&Object.keys(s(r).data).length?(i(),d("div",q,[a("div",A,c(e.__("Certification")),1),a("div",P,c(e.__("You are already certified for this course. Click on the card below to open your certificate.")),1),a("div",{class:"border p-3 w-fit min-w-60 rounded-md space-y-2 hover:bg-surface-gray-1 cursor-pointer mt-5",onClick:n[0]||(n[0]=H=>M(s(r).data))},[a("div",T,c(o.value),1),a("div",U,c(e.__("Issued On"))+": "+c(s(C)(s(r).data.issue_date).format("DD MMM YYYY")),1)])])):(i(),d("div",G,[l.value.length?(i(),L(F,{key:0,courses:l.value},null,8,["courses"])):R("",!0)]))])],64))}};export{X as default};
//# sourceMappingURL=CourseCertification-Ci_LppQS.js.map
