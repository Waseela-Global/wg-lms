{"version":3,"file":"Jobs-CgTGNOC8.js","sources":["../../../../frontend/src/components/JobCard.vue","../../../../frontend/src/pages/Jobs.vue"],"sourcesContent":["<template>\n\t<div\n\t\tclass=\"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-3\"\n\t>\n\t\t<div class=\"flex space-x-4 mb-4\">\n\t\t\t<div class=\"flex flex-col space-y-2 flex-1 break-all\">\n\t\t\t\t<div class=\"text-lg font-semibold text-ink-gray-9\">\n\t\t\t\t\t{{ job.company_name }}\n\t\t\t\t</div>\n\t\t\t\t<span class=\"font-medium text-ink-gray-7 leading-5\">\n\t\t\t\t\t{{ job.job_title }}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"flex items-center space-x-1 text-sm text-ink-gray-7\">\n\t\t\t\t\t<MapPin class=\"size-3\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ job.location }}{{ job.country ? `, ${job.country}` : '' }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"job.applicants\"\n\t\t\t\t\tclass=\"flex items-center space-x-1 text-sm text-ink-gray-7\"\n\t\t\t\t>\n\t\t\t\t\t<User class=\"size-3\" />\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ job.applicants }}\n\t\t\t\t\t\t{{ job.applicants > 1 ? __('applicants') : __('applicant') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- <img :src=\"job.company_logo\" alt=\"Company Logo\" class=\"size-8  rounded-full object-contain  bg-white\" /> -->\n\t\t</div>\n\t\t<div class=\"space-x-2 mt-auto\">\n\t\t\t<Badge>\n\t\t\t\t{{ job.type }}\n\t\t\t</Badge>\n\t\t\t<Badge v-if=\"job.work_mode\">\n\t\t\t\t{{ job.work_mode }}\n\t\t\t</Badge>\n\t\t\t<Badge>\n\t\t\t\t{{ dayjs(job.creation).fromNow() }}\n\t\t\t</Badge>\n\t\t</div>\n\t\t<!-- <div\n\t\t\tclass=\"description text-ink-gray-9 text-sm\"\n\t\t\tv-html=\"job.description\"\n\t\t></div> -->\n\t</div>\n</template>\n<script setup>\nimport { inject } from 'vue'\nimport { Badge } from 'frappe-ui'\nimport { MapPin, User } from 'lucide-vue-next'\n\nconst dayjs = inject('$dayjs')\nconst props = defineProps({\n\tjob: {\n\t\ttype: Object,\n\t\tdefault: null,\n\t},\n})\n</script>\n<style>\n.description {\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 2;\n\t-webkit-box-orient: vertical;\n\ttext-overflow: ellipsis;\n\twidth: 100%;\n\toverflow: hidden;\n\tmargin-top: auto;\n\tline-height: 1.5;\n}\n</style>\n","<template>\n\t<div class=\"\">\n\t\t<header\n\t\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t\t>\n\t\t\t<Breadcrumbs\n\t\t\t\tclass=\"h-7\"\n\t\t\t\t:items=\"[{ label: __('Jobs'), route: { name: 'Jobs' } }]\"\n\t\t\t/>\n\t\t\t<router-link\n\t\t\t\tv-if=\"user.data?.name\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'JobForm',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tjobName: 'new',\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button v-if=\"!readOnlyMode\" variant=\"solid\">\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('New Job') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t</header>\n\t\t<div>\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto p-5\"\n\t\t\t>\n\t\t\t\t<div class=\"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0\">\n\t\t\t\t\t{{ __('{0} Open Jobs').format(jobCount) }}\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\"grid grid-cols-1 gap-2 md:grid-cols-4\"\n\t\t\t\t\t:class=\"user.data ? 'md:grid-cols-3' : 'md:grid-cols-2'\"\n\t\t\t\t>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:placeholder=\"__('Search')\"\n\t\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t@input=\"updateJobs\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Search\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4 stroke-1.5 text-ink-gray-5\"\n\t\t\t\t\t\t\t\tname=\"search\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tv-if=\"user.data\"\n\t\t\t\t\t\tdoctype=\"Country\"\n\t\t\t\t\t\tv-model=\"country\"\n\t\t\t\t\t\t:placeholder=\"__('Country')\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"jobType\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"jobTypes\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t:placeholder=\"__('Type')\"\n\t\t\t\t\t\t@change=\"updateJobs\"\n\t\t\t\t\t/>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\tv-model=\"workMode\"\n\t\t\t\t\t\ttype=\"select\"\n\t\t\t\t\t\t:options=\"workModes\"\n\t\t\t\t\t\tclass=\"min-w-40 lg:min-w-0 lg:w-32 xl:w-40\"\n\t\t\t\t\t\t:placeholder=\"__('Work Mode')\"\n\t\t\t\t\t\t@change=\"updateJobs\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"jobs.data?.length\" class=\"w-full md:w-4/5 mx-auto p-5 pt-0\">\n\t\t\t\t<div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n\t\t\t\t\t<router-link\n\t\t\t\t\t\tv-for=\"job in jobs.data\"\n\t\t\t\t\t\t:to=\"{\n\t\t\t\t\t\t\tname: 'JobDetail',\n\t\t\t\t\t\t\tparams: { job: job.name },\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:key=\"job.name\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<JobCard :job=\"job\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<EmptyState v-else type=\"Job Openings\" />\n\t\t</div>\n\t</div>\n</template>\n<script setup>\nimport {\n\tButton,\n\tBreadcrumbs,\n\tcall,\n\tcreateResource,\n\tFormControl,\n\tusePageMeta,\n} from 'frappe-ui'\nimport { Plus, Search } from 'lucide-vue-next'\nimport { sessionStore } from '../stores/session'\nimport { inject, computed, ref, onMounted, watch } from 'vue'\nimport JobCard from '@/components/JobCard.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport EmptyState from '@/components/EmptyState.vue'\n\nconst user = inject('$user')\nconst jobType = ref(null)\nconst workMode = ref(null)\nconst { brand } = sessionStore()\nconst searchQuery = ref('')\nconst country = ref(null)\nconst filters = ref({})\nconst orFilters = ref({})\nconst jobCount = ref(0)\nconst readOnlyMode = window.read_only_mode\n\nonMounted(() => {\n\tlet queries = new URLSearchParams(location.search)\n\tif (queries.has('type')) {\n\t\tjobType.value = queries.get('type')\n\t}\n\tif (queries.has('work_mode')) {\n\t\tworkMode.value = queries.get('work_mode')\n\t}\n\tupdateJobs()\n})\n\nconst jobs = createResource({\n\turl: 'lms.lms.api.get_job_opportunities',\n\tcache: ['jobs'],\n})\n\nconst updateJobs = () => {\n\tupdateFilters()\n\tjobs.update({\n\t\tparams: {\n\t\t\tfilters: filters.value,\n\t\t\torFilters: orFilters.value,\n\t\t},\n\t})\n\tjobs.reload()\n}\n\nconst updateFilters = () => {\n\tfilters.value.status = 'Open'\n\tfilters.value.disabled = 0\n\n\tif (jobType.value) {\n\t\tfilters.value.type = jobType.value\n\t} else {\n\t\tdelete filters.value.type\n\t}\n\n\tif (workMode.value) {\n\t\tfilters.value.work_mode = workMode.value\n\t} else {\n\t\tdelete filters.value.work_mode\n\t}\n\n\tif (searchQuery.value) {\n\t\torFilters.value = {\n\t\t\tjob_title: ['like', `%${searchQuery.value}%`],\n\t\t\tcompany_name: ['like', `%${searchQuery.value}%`],\n\t\t\tlocation: ['like', `%${searchQuery.value}%`],\n\t\t}\n\t} else {\n\t\torFilters.value = {}\n\t}\n\n\tif (country.value) {\n\t\tfilters.value.country = country.value\n\t} else {\n\t\tdelete filters.value.country\n\t}\n}\n\nwatch(country, (val) => {\n\tupdateJobs()\n})\n\nwatch(jobs, () => {\n\tjobCount.value = jobs.data?.length || 0\n})\n\nconst jobTypes = computed(() => {\n\treturn [\n\t\t'',\n\t\t{ label: __('Full Time'), value: 'Full Time' },\n\t\t{ label: __('Part Time'), value: 'Part Time' },\n\t\t{ label: __('Contract'), value: 'Contract' },\n\t\t{ label: __('Freelance'), value: 'Freelance' },\n\t]\n})\n\nconst workModes = computed(() => {\n\treturn [\n\t\t'',\n\t\t{ label: 'On site', value: 'On-site' },\n\t\t{ label: 'Hybrid', value: 'Hybrid' },\n\t\t{ label: 'Remote', value: 'Remote' },\n\t]\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: __('Jobs'),\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["dayjs","inject","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","__props","_hoisted_5","_hoisted_6","_createVNode","_unref","MapPin","_hoisted_7","User","__","_hoisted_8","Badge","_createTextVNode","_createBlock","user","jobType","ref","workMode","brand","sessionStore","searchQuery","country","filters","orFilters","jobCount","readOnlyMode","onMounted","queries","updateJobs","jobs","createResource","updateFilters","watch","val","_a","jobTypes","computed","workModes","usePageMeta","Breadcrumbs","_component_router_link","Button","Plus","_normalizeClass","FormControl","$event","Search","Link","_Fragment","_renderList","job","JobCard","EmptyState"],"mappings":"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"}